<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Assistify, Redlink">
<title>Smarti Guide</title>
<style>
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: #fff; color: #222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.4; color: #6f6f6f; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #2ba6cb; text-decoration: none; line-height: inherit; }
a:hover, a:focus { color: #2795b6; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: bold; font-style: normal; color: #222; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: bold; color: #7f0a0c; }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222; border-bottom: 1px dotted #ddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #ddd; }
blockquote cite { display: block; font-size: 0.8125em; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }

blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #ddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: #fff; margin-bottom: 1.25em; border: solid 1px #ddd; }
table thead, table tfoot { background: #f5f5f5; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.4; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: inherit; font-style: normal !important; letter-spacing: 0; padding: 0; line-height: inherit; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.4; color: black; font-family: monospace, serif; font-weight: normal; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #555555; }

kbd { font-family: Consolas, "Liberation Mono", Courier, monospace; display: inline-block; color: #222; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -moz-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menuref { color: #000; }

.menuseq b:not(.caret), .menuref { font-weight: inherit; }

.menuseq { word-spacing: -0.02em; }
.menuseq b.caret { font-size: 1.25em; line-height: 0.8; }
.menuseq i.caret { font-weight: bold; text-align: center; width: 0.45em; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: #000; margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddd; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddd; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddd; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: #555555; display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: #6f6f6f; }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: #6f6f6f; }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: #000; border-bottom: 1px solid #ddd; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #ddd; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #6f6f6f; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f2f2f2; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #ddd; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #ddd; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #222; padding: 1.25em; }

#footer-text { color: #dddddd; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #ddd; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #222; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #151515; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: #000; }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddd; color: #555555; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: #fff; -webkit-border-radius: 0; border-radius: 0; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 0; border-radius: 0; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #6f6f6f; margin-top: 0; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: #eee; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #ccc; -webkit-border-radius: 0; border-radius: 0; word-wrap: break-word; padding: 0.8em 0.8em 0.65em 0.8em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: #eee; background-color: black; }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 0.8em 0.8em 0.65em 0.8em; -webkit-border-radius: 0; border-radius: 0; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.4; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddd; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: #6f6f6f; font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #6f6f6f; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid #555555; }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: #6f6f6f; font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.8125em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: #555555; }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #ddd; }

table.grid-all > thead > tr > .tableblock, table.grid-all > tbody > tr > .tableblock { border-width: 0 1px 1px 0; }

table.grid-all > tfoot > tr > .tableblock { border-width: 1px 1px 0 0; }

table.grid-cols > * > tr > .tableblock { border-width: 0 1px 0 0; }

table.grid-rows > thead > tr > .tableblock, table.grid-rows > tbody > tr > .tableblock { border-width: 0 0 1px 0; }

table.grid-rows > tfoot > tr > .tableblock { border-width: 1px 0 0 0; }

table.grid-all > * > tr > .tableblock:last-child, table.grid-cols > * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-all > tbody > tr:last-child > .tableblock, table.grid-all > thead:last-child > tr > .tableblock, table.grid-rows > tbody > tr:last-child > .tableblock, table.grid-rows > thead:last-child > tr > .tableblock { border-bottom-width: 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.4; background: #f5f5f5; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #222; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.checklist, ul.none, ol.none, ul.no-bullet, ol.no-bullet, ol.unnumbered, ul.unstyled, ol.unstyled { list-style-type: none; }

ul.no-bullet, ol.no-bullet, ol.unnumbered { margin-left: 0.625em; }

ul.unstyled, ol.unstyled { margin-left: 0; }

ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1.25em; font-size: 0.8em; position: relative; bottom: 0.125em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }

ul.inline { display: -ms-flexbox; display: -webkit-box; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; list-style: none; margin: 0 0 0.625em -1.25em; }

ul.inline > li { margin-left: 1.25em; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0.4em 0.75em 0 0.75em; line-height: 1; vertical-align: top; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px #fff; -webkit-box-shadow: 0 0 0 1px #ddd; box-shadow: 0 0 0 1px #ddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }
a span.icon > .fa { cursor: inherit; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #207d98; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.literalblock pre, .listingblock pre { background: #eee; }

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Smarti Guide</h1>
<div class="details">
<span id="author" class="author">Assistify</span><br>
<span id="email" class="email"><a href="mailto:info@assistify.de">info@assistify.de</a></span><br>
<span id="author2" class="author">Redlink</span><br>
<span id="email2" class="email"><a href="mailto:info@redlink.co">info@redlink.co</a></span><br>
<span id="revnumber">version v0.8.1,</span>
<span id="revdate">2019-07-05</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#smarti-guide-overview">Smarti Guide Overview</a>
<ul class="sectlevel2">
<li><a href="#a-href-_smarti_installation_guide-how-to-install-a"><a href="#_smarti_installation_guide">How to install</a></a></li>
<li><a href="#a-href-_smarti_configuration_guide-how-to-configure-a"><a href="#_smarti_configuration_guide">How to configure</a></a></li>
<li><a href="#a-href-_smarti_integration_guide-how-to-integrate-a"><a href="#_smarti_integration_guide">How to integrate</a></a></li>
<li><a href="#a-href-_smarti_troubleshooting_guide-how-to-troubleshoot-a"><a href="#_smarti_troubleshooting_guide">How to troubleshoot</a></a></li>
<li><a href="#a-href-_smarti_developer_guide-how-to-develop-a"><a href="#_smarti_developer_guide">How to develop</a></a></li>
<li><a href="#a-href-_smarti_contribution_guide-how-to-contribute-a"><a href="#_smarti_contribution_guide">How to contribute</a></a></li>
</ul>
</li>
<li><a href="#smarti-installation-guide">Smarti Installation Guide</a>
<ul class="sectlevel2">
<li><a href="#system-requirements">System requirements</a></li>
<li><a href="#general-recommendations">General recommendations</a></li>
<li><a href="#deploy-install">Deploy / Install</a></li>
<li><a href="#system-maintenance">System Maintenance</a></li>
<li><a href="#additional-components">Additional components</a></li>
<li><a href="#third-party-dependencies-and-licenses">Third-Party Dependencies and Licenses</a></li>
<li><a href="#configuration-2">Configuration</a></li>
<li><a href="#requirements-memory-cpu">Requirements (Memory, CPU)</a></li>
</ul>
</li>
<li><a href="#smarti-configuration-guide">Smarti Configuration Guide</a>
<ul class="sectlevel2">
<li><a href="#client-configuration">Client Configuration</a></li>
<li><a href="#application-configuration">Application Configuration</a></li>
</ul>
</li>
<li><a href="#smarti-integration-guide">Smarti Integration Guide</a>
<ul class="sectlevel2">
<li><a href="#swagger-documentation">Swagger documentation</a></li>
<li><a href="#integration-tasks">Integration tasks</a></li>
<li><a href="#restful-integration-sequence">RESTful-Integration Sequence</a></li>
<li><a href="#conversational-web-service">Conversational web service</a></li>
<li><a href="#legacy-webservice">Legacy Webservice</a></li>
<li><a href="#integrations">Integrations</a></li>
<li><a href="#rocket-chat-integration-sequence">Rocket.Chat Integration Sequence</a></li>
<li><a href="#client-configuration-web-service">Client configuration web service</a></li>
<li><a href="#conversation-admin-web-service">Conversation admin web service</a></li>
<li><a href="#user-management-web-service">User management web service</a></li>
</ul>
</li>
<li><a href="#smarti-troubleshooting-guide">Smarti Troubleshooting Guide</a>
<ul class="sectlevel2">
<li><a href="#general-advices">General advices</a></li>
<li><a href="#external-libraries-not-found-or-not-readable">External libraries not found or not readable</a></li>
<li><a href="#running-smarti-on-a-container">Running Smarti on a container</a></li>
<li><a href="#not-enough-memory-build_time">Not enough memory @build_time</a></li>
<li><a href="#not-enough-memory-run_time">Not enough memory @run_time</a></li>
</ul>
</li>
<li><a href="#smarti-developer-guide">Smarti Developer Guide</a>
<ul class="sectlevel2">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#build-and-run">Build and Run</a></li>
</ul>
</li>
<li><a href="#smarti-contribution-guide">Smarti Contribution Guide</a></li>
<li><a href="#a-href-faq-html-faqs-a"><a href="faq.html">FAQs</a></a></li>
<li><a href="#a-href-changelog-html-changelog-a"><a href="changelog.html">Changelog</a></a></li>
<li><a href="#license">License</a></li>
<li><a href="#authors">Authors</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="https://travis-ci.org/redlink-gmbh/smarti.png" alt="Build Status">
</div>
</div>
<div class="quoteblock abstract">
<blockquote>
Smarti is a service component for conversational data. It allows to classify conversation intents, extract entities using
natural language components and makes this data actionable via turning it into queries for an extendable set of endpoints.
In addition Smarti is able to store conversations and thus suggest similar historic conversation flows for new messages.
</blockquote>
</div>
<div class="paragraph">
<p>This document is written for developers, operators and administrators who like to</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>debug, change and contribute</strong> Smarti code,</p>
</li>
<li>
<p><strong>run</strong> Smarti on a local machine,</p>
</li>
<li>
<p><strong>deploy</strong> Smarti on a server and</p>
</li>
<li>
<p><strong>help Smarti</strong> get a better application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All interested can convince themselves of the documentation quality.
And if you caught fire, maybe you will become a Smarti developer very soon ;-)</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
@all if you find typos, missing sections or if you have any other kind of helpful advice to improve this documentation or <strong>Smarti</strong> in general, please let us know.
Share your thoughts and open an issue right <a href="https://github.com/redlink-gmbh/smarti/issues">here</a>.
The <strong>Smarti</strong> community will help you along, as fast as possible.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-guide-overview"><a class="anchor" href="#smarti-guide-overview"></a><a class="link" href="#smarti-guide-overview">Smarti Guide Overview</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="a-href-_smarti_installation_guide-how-to-install-a"><a class="anchor" href="#a-href-_smarti_installation_guide-how-to-install-a"></a><a class="link" href="#a-href-_smarti_installation_guide-how-to-install-a"><a href="#_smarti_installation_guide">How to install</a></a></h3>
<div class="paragraph">
<p>Installation packages are provided for <strong><a href="https://www.debian.org">Debian</a></strong>- and <strong><a href="https://www.redhat.com">RedHat</a></strong>-based systems, and as <strong><a href="https://www.docker.com">Docker Image</a></strong>.<br>
All packages are available from the <a href="https://github.com/redlink-gmbh/smarti/releases/latest">download area</a>.
Older versions can be found in the <a href="https://github.com/redlink-gmbh/smarti/releases">release archive</a>.<br>
Alternatively the application can be started by directly launching the executable jar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar smarti-${smarti-version}-exec.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check out a detailed <a href="#_smarti_installation_guide">Smarti Installation Guide</a> including <a href="#_system_requirements">system requirements</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="a-href-_smarti_configuration_guide-how-to-configure-a"><a class="anchor" href="#a-href-_smarti_configuration_guide-how-to-configure-a"></a><a class="link" href="#a-href-_smarti_configuration_guide-how-to-configure-a"><a href="#_smarti_configuration_guide">How to configure</a></a></h3>
<div class="paragraph">
<p>The <a href="#_smarti_configuration_guide">Smarti Configuration</a> is done on two levels:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Since <strong>Smarti</strong> is a <a href="https://java.com/">Java</a> application based on the <a href="https://spring.io/">Spring Framework</a>, global application configurations are made using the <code>application.properties</code> file.
Read the <a href="#_application_configuration">Application Configuration</a> section to get an overview of Smarti&#8217;s numerous configuration options.</p>
</li>
<li>
<p>Smarti is a multi-client capable system. Therefore each client has its own configuration.
Client configurations can be manage with Smarti&#8217;s <a href="#_admin_ui">Admin User Interface</a>.
Alternatively, you can also use the <a href="#_client_configuration_web_service">client configuration API</a> to manage your client&#8217;s configurations.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="a-href-_smarti_integration_guide-how-to-integrate-a"><a class="anchor" href="#a-href-_smarti_integration_guide-how-to-integrate-a"></a><a class="link" href="#a-href-_smarti_integration_guide-how-to-integrate-a"><a href="#_smarti_integration_guide">How to integrate</a></a></h3>
<div class="paragraph">
<p>Through Smarti&#8217;s conversational RESTful-API it can be seamlessly integrated into any Chat-based communication platform.
To learn how to integrate Smarti into chat applications, read the <a href="#_conversational_web_service">Conversational API</a> section.</p>
</div>
<div class="paragraph">
<p>For the time being, Smarti works with <a href="https://rocket.chat">Rocket.Chat</a> conversations, where it can be seamlessly integrated via an <a href="https://github.com/assistify/Rocket.Chat">RC plugin</a>.
For more information, see the <a href="#_chat_adapter_web_service">Rocket.Chat adapter API</a> description.</p>
</div>
</div>
<div class="sect2">
<h3 id="a-href-_smarti_troubleshooting_guide-how-to-troubleshoot-a"><a class="anchor" href="#a-href-_smarti_troubleshooting_guide-how-to-troubleshoot-a"></a><a class="link" href="#a-href-_smarti_troubleshooting_guide-how-to-troubleshoot-a"><a href="#_smarti_troubleshooting_guide">How to troubleshoot</a></a></h3>
<div class="paragraph">
<p>In some cases, Smarti will not do what you expect it to do.
You may have encountered a problem that is already known.
In the <a href="#_smarti_troubleshooting_guide">Smarti Troubleshooting Guide</a> you will find solutions for known problems
and learn how to get to the bottom of the cause in an unexpected error situation.</p>
</div>
</div>
<div class="sect2">
<h3 id="a-href-_smarti_developer_guide-how-to-develop-a"><a class="anchor" href="#a-href-_smarti_developer_guide-how-to-develop-a"></a><a class="link" href="#a-href-_smarti_developer_guide-how-to-develop-a"><a href="#_smarti_developer_guide">How to develop</a></a></h3>
<div class="paragraph">
<p><strong>Smarti</strong> is a <a href="https://java.com/">Java</a>-Application based on the <a href="https://spring.io/">Spring Framework</a>.
The application uses <a href="https://www.mongodb.com/">MongoDB</a> as database and <a href="http://lucene.apache.org/solr/">Apache Solr</a> as search engine.
After checking out the sources from <a href="https://github.com/redlink-gmbh/smarti/">GitHub</a> and installing the build components (<code>ruby</code>, <code>ruby-sass</code>, <code>ruby-compass</code>) a build can be executed as simple</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mvn clean install [ -Pdeb | -Prpm ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Read the <a href="#_smarti_developer_guide">Developers Guide</a> to become a Smarti developer.</p>
</div>
</div>
<div class="sect2">
<h3 id="a-href-_smarti_contribution_guide-how-to-contribute-a"><a class="anchor" href="#a-href-_smarti_contribution_guide-how-to-contribute-a"></a><a class="link" href="#a-href-_smarti_contribution_guide-how-to-contribute-a"><a href="#_smarti_contribution_guide">How to contribute</a></a></h3>
<div class="paragraph">
<p>Smarti is an Open Source project so everyone is encouraged to improve it. Don&#8217;t hesitate to report bugs, provide fixes or
share new ideas with us. Use the issue tracker or send a pull request. To learn more about contributing and how to become a Smarti commiter, read the <a href="#_smarti_contribution_guide">Smarti Contribution Guide</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-installation-guide"><a class="anchor" href="#smarti-installation-guide"></a><a class="link" href="#smarti-installation-guide">Smarti Installation Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Smarti installation guide is written for developers, operators and administrators who like to run Smarti on a server, as professional service or in production.</p>
</div>
<div class="sect2">
<h3 id="system-requirements"><a class="anchor" href="#system-requirements"></a><a class="link" href="#system-requirements">System requirements</a></h3>
<div class="paragraph">
<p><strong>Server sizing</strong></p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> DualCore-CPU (&gt; 2GHz)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 4GB RAM</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 2GB temporary Storage</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Operating systems</strong></p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> Debian (e.g. <a href="http://releases.ubuntu.com/16.04/">Ubuntu 16.04. LTS</a>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Red Hat (e.g. <a href="https://access.redhat.com/articles/3078#RHEL7">Red Hat Enterprise Linux 7</a>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> Amazon (e.g. <a href="https://aws.amazon.com/amazon-linux-ami/2017.03-release-notes/">Amazon Linux 2017.03</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>System components</strong></p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <a href="https://java.com/">JavaVM</a>, version 1.8 (application default port: <code>8080</code>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="https://www.mongodb.com/">MongoDB</a>, version &gt;= 2.6, &lt; 3.6 (database default port: <code>27017</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Ensure your platform / environment running Smarti on fulfills these system requirements.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Additional components &amp; <a href="https://github.com/stanfordnlp/CoreNLP">Stanford CoreNLP</a></strong><br>
Except the Stanford NLP libraries (GPL licensed), all direct runtime-dependencies such as third-party libraries are packaged with the main executable.
Where to get and place the Stanford NLP libraries is explained in section <a href="index.html.html#_additional_components">Additional components</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="general-recommendations"><a class="anchor" href="#general-recommendations"></a><a class="link" href="#general-recommendations">General recommendations</a></h3>
<div class="sect3">
<h4 id="run-smarti-as-a-service-in-production"><a class="anchor" href="#run-smarti-as-a-service-in-production"></a><a class="link" href="#run-smarti-as-a-service-in-production">Run Smarti as a service in production</a></h4>
<div class="paragraph">
<p>Installation packages are provided for <a href="https://www.debian.org/">Debian</a>- and <a href="https://www.redhat.com/">RedHat</a>-based systems.
As Smarti is a <a href="https://projects.spring.io/spring-boot/">Spring Boot</a> application it can be started by directly launching the executable jar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar smarti-${smarti-version}-exec.jar</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
To run Smarti in production it is recommended to deploy the <code>deb</code> or <code>rpm</code> package on your target environment instead executing the jar directly.
If you like to setup your development client or a non-productive server read section <a href="#build_and_run">Build and Run</a> explains how to do start Smarti by executing the executable jar.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="run-mongodb-as-a-dedicated-service"><a class="anchor" href="#run-mongodb-as-a-dedicated-service"></a><a class="link" href="#run-mongodb-as-a-dedicated-service">Run MongoDB as a dedicated service</a></h4>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
In a production scenario it is absolutely recommended to run MongoDB on a dedicated system.
If you like to run MongoDB on the same machine as the Smarti application <code>4 GB</code> RAM are insufficient.
A developer client should have at least <code>8 GB</code> RAM.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="deploy-install"><a class="anchor" href="#deploy-install"></a><a class="link" href="#deploy-install">Deploy / Install</a></h3>
<div class="sect3">
<h4 id="deploy-with-docker"><a class="anchor" href="#deploy-with-docker"></a><a class="link" href="#deploy-with-docker">Deploy with Docker</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ docker run -d --name mongodb mongo
$ docker run -d --name smarti --link mongodb:mongo -p 8080:8080 redlinkgmbh/smarti</code></pre>
</div>
</div>
<div class="paragraph">
<p>The provided docker-image does not contain some required (GPL-licensed) dependencies. To build a
contained image, use the following snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ docker build -t smarti-with-stanfordnlp -&lt;EOF
FROM redlinkgmbh/smarti

USER root
ADD [\
    &quot;https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0.jar&quot;, \
    &quot;https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0-models-german.jar&quot;, \
    &quot;/opt/ext/&quot;]
RUN chmod -R a+r /opt/ext/
USER smarti
EOF</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="deploy-on-debian"><a class="anchor" href="#deploy-on-debian"></a><a class="link" href="#deploy-on-debian">Deploy on Debian</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo dpkg -i ${smarti-source}/dist/target/smarti_${smarti-build-version}.deb</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="deploy-on-red-hat"><a class="anchor" href="#deploy-on-red-hat"></a><a class="link" href="#deploy-on-red-hat">Deploy on Red Hat</a></h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo rpm -i ${smarti-source}/dist/target/smarti_${smarti-build-version}.rpm</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="installing-additional-components"><a class="anchor" href="#installing-additional-components"></a><a class="link" href="#installing-additional-components">Installing Additional Components</a></h4>
<div class="paragraph">
<p>To install additional components, e.g. Stanford-NLP, add the respective libraries into the folder <code>/var/lib/smarti/ext</code>.</p>
</div>
<div class="paragraph">
<p>Stanford-NLP can be installed using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ wget -P /var/lib/smarti/ext -nH -nd -c \
    https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0.jar \
    https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0-models-german.jar</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="changing-the-user"><a class="anchor" href="#changing-the-user"></a><a class="link" href="#changing-the-user">Changing the User</a></h4>
<div class="paragraph">
<p>When installed using one of the provided packages (<code>deb</code>, <code>rpm</code>), smarti runs as it&#8217;s own system user <code>smarti</code>. This user is created during the installation
process if it does not already exists.</p>
</div>
<div class="paragraph">
<p>To run smarti as a different user (<code>assistify</code> in this example), do the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the new working-directory</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir -p /data/smarti
$ chown -R assistify: /data/smarti</code></pre>
</div>
</div>
</li>
<li>
<p>Populate the new working-directory with the required configuration files, e.g. by copying the default settings</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cp /etc/smarti/* /data/smarti</code></pre>
</div>
</div>
</li>
<li>
<p>Update the systemd configuration for smarti</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ systemctl edit smarti</code></pre>
</div>
</div>
<div class="paragraph">
<p>and add the following content</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">[Service]
User = assistify
WorkingDirectory = /data/smarti</code></pre>
</div>
</div>
</li>
<li>
<p>Restart the smarti</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ systemctl try-restart smarti</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="system-maintenance"><a class="anchor" href="#system-maintenance"></a><a class="link" href="#system-maintenance">System Maintenance</a></h3>
<div class="sect3">
<h4 id="daemon-service"><a class="anchor" href="#daemon-service"></a><a class="link" href="#daemon-service">Daemon / Service</a></h4>
<div class="sect4">
<h5 id="configuration"><a class="anchor" href="#configuration"></a><a class="link" href="#configuration">Configuration</a></h5>
<div class="ulist">
<ul>
<li>
<p><code>/etc/default/smarti</code></p>
</li>
<li>
<p>JVM and JVM Options (e.g. <code>-Xmx4g</code>)</p>
</li>
<li>
<p>Program Arguments (overwriting settings from the <code>application.properties</code>)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="start-stop-restart"><a class="anchor" href="#start-stop-restart"></a><a class="link" href="#start-stop-restart">Start / Stop / Restart</a></h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo service smarti [ start | stop | restart  ]</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="status"><a class="anchor" href="#status"></a><a class="link" href="#status">Status</a></h5>
<div class="paragraph">
<p>To check the service status use the daemon</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ service smarti status</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should result in something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">● smarti.service - smarti
   Loaded: loaded (/lib/systemd/system/smarti.service; enabled; vendor preset: enabled)
   Active: active (running) since Sat 2017-08-26 12:12:28 UTC; 6s ago
 Main PID: 4606 (bash)
    Tasks: 22
   Memory: 647.8M
      CPU: 12.518s
   CGroup: /system.slice/smarti.service</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="logging"><a class="anchor" href="#logging"></a><a class="link" href="#logging">Logging</a></h4>
<div class="ulist">
<ul>
<li>
<p>Working-Directory at <code>/var/lib/smarti/</code></p>
</li>
<li>
<p>Log-Files available under <code>/var/lib/smarti/logs/</code>, a symlink to <code>/var/log/smarti/</code></p>
</li>
<li>
<p><a href="http://logback.qos.ch/manual/configuration.html">Log-Configuration</a> under <code>/var/lib/smarti/logback.xml</code>, a symlink to <code>/etc/smarti/logback.xml</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please keep in mind, that if smarti runs as a different user it probably also has a custom working directory. In such case, logs are stored in the new working directory (or whatever is configured in the logging-configuration).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To Check if Smarti is started search in <code>/var/log/smarti/main.log</code> for something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">[main] INFO  io.redlink.smarti.Application - smarti started: http://${smarti-host}:${smarti-port}/</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="monitoring"><a class="anchor" href="#monitoring"></a><a class="link" href="#monitoring">Monitoring</a></h4>
<div class="sect4">
<h5 id="system-health"><a class="anchor" href="#system-health"></a><a class="link" href="#system-health">System Health</a></h5>
<div class="paragraph">
<p>A system-wide health check is available at <code><a href="http://${smarti-host}:${smarti-port}/system/health" class="bare">http://${smarti-host}:${smarti-port}/system/health</a></code>.
In case of any problems you can call this URL in your browser or send a <code>curl</code> in order to check if Smarti is up and running.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -X GET http://${smarti-host}:${smarti-port}/system/health</code></pre>
</div>
</div>
<div class="paragraph">
<p>On success, if everything is running it returns: <code>{"status":"UP"}</code> else <code>{"status":"DOWN"}</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>{"status":"DOWN"}</code> is also reported, if Stanford NLP libraries are not present in the classpath.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="system-info"><a class="anchor" href="#system-info"></a><a class="link" href="#system-info">System Info</a></h4>
<div class="paragraph">
<p>You can get a detailed information about the build version that is running by calling</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -X GET http://${smarti-host}:${smarti-port}/system/info</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="additional-components"><a class="anchor" href="#additional-components"></a><a class="link" href="#additional-components">Additional components</a></h3>
<div class="paragraph">
<p>Due to licensing-issues (e.g. <a href="https://www.gnu.org/licenses/gpl-3.0.html">GPL</a>), some optional dependencies are not part of the distribution packages.
To enable these additional modules, you need to put the missing libraries into the <code>ext</code>-folder in the working directory.</p>
</div>
<div class="paragraph">
<p>When installed with the provided <code>deb</code> or <code>rpm</code> package, this folder is located at <code>/var/lib/smarti/ext</code> by default and contains a simple readme.</p>
</div>
<div class="listingblock">
<div class="title">plugin-info.json</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">plugins</span><span class="delimiter">&quot;</span></span> : [{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stanford CoreNLP (German)</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stanford CoreNLP provides a set of human language technology tools. It can give the base forms of words, their parts of speech, whether they are names of companies, people, etc., normalize dates, times, and numeric quantities, mark up the structure of sentences in terms of phrases and syntactic dependencies, indicate which noun phrases refer to the same entities, indicate sentiment, extract particular or open-class relations between entity mentions, get the quotes people said, etc.</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">dependencies</span><span class="delimiter">&quot;</span></span>: [{
      <span class="key"><span class="delimiter">&quot;</span><span class="content">groupId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">edu.stanford.nlp</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">artifactId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">stanford-corenlp</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">3.8.0</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">licenses</span><span class="delimiter">&quot;</span></span>: [{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">GNU General Public License Version 3</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.gnu.org/licenses/gpl-3.0.txt</span><span class="delimiter">&quot;</span></span>
      }],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0.jar</span><span class="delimiter">&quot;</span></span>
    },
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">groupId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">edu.stanford.nlp</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">artifactId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">stanford-corenlp</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">version</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">3.8.0</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">classifier</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">models-german</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">licenses</span><span class="delimiter">&quot;</span></span>: [{
          <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">GNU General Public License Version 3</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.gnu.org/licenses/gpl-3.0.txt</span><span class="delimiter">&quot;</span></span>
        }],
        <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0-models-german.jar</span><span class="delimiter">&quot;</span></span>
      }]
  }]
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<strong>For developers:</strong> When running Smarti by directly executing the jar file, you need to create the <code>ext</code> directory relative to the location where the <code>java</code> command is executed <code>${smarti-work-dir}/ext</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Make sure the user that is running the <code>java</code> process has the right permissions on the file system.
In case you run into trouble, read the section <a href="#_smarti_troubleshooting_guide">Troubleshooting</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="enable-stanford-nlp"><a class="anchor" href="#enable-stanford-nlp"></a><a class="link" href="#enable-stanford-nlp">Enable Stanford NLP</a></h4>
<div class="paragraph">
<p>To enable analysis based on <a href="https://nlp.stanford.edu/">Stanford NLP</a>, put the following libraries into the <code>ext</code>-folder.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0.jar">stanford-corenlp-3.8.0.jar</a></p>
</li>
<li>
<p><a href="https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0-models-german.jar">stanford-corenlp-3.8.0-models-german.jar</a></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ${smarti-work-dir}/ext
$ wget https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0.jar
$ wget https://repo1.maven.org/maven2/edu/stanford/nlp/stanford-corenlp/3.8.0/stanford-corenlp-3.8.0-models-german.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="third-party-dependencies-and-licenses"><a class="anchor" href="#third-party-dependencies-and-licenses"></a><a class="link" href="#third-party-dependencies-and-licenses">Third-Party Dependencies and Licenses</a></h3>
<div class="paragraph">
<p>When installing via one of the provided packages (<code>rpm</code>, <code>deb</code>) a list of used third-party libraries and their licenses are available under</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/usr/share/doc/smarti/THIRD-PARTY.txt</code> (backend), and</p>
</li>
<li>
<p><code>/usr/share/doc/smarti/UI-THIRD-PARTY.json</code> (frontend, UI)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From the running system, similar files are served.</p>
</div>
<div class="paragraph">
<p><strong>Backend</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl http://${smarti-host}:${smarti-port}/THIRD-PARTY.txt</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Frontend UI</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl http://${smarti-host}:${smarti-port}/3rdPartyLicenses.json</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-2"><a class="anchor" href="#configuration-2"></a><a class="link" href="#configuration-2">Configuration</a></h3>
<div class="paragraph">
<p>Once Smarti is up and running, go ahead and read the next section <a href="#_application_configuration">Application Configuration</a> about Smarti&#8217;s powerful configuration options.</p>
</div>
</div>
<div class="sect2">
<h3 id="requirements-memory-cpu"><a class="anchor" href="#requirements-memory-cpu"></a><a class="link" href="#requirements-memory-cpu">Requirements (Memory, CPU)</a></h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default configuration of Smarti is optimized for 4 GByte of Memory (JVM parameter: <code>-Xmx4g</code>) and <code>2</code> CPU cores.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Smarti performs text analysis over conversations. Such analysis are based on machine learning models that require a considerable amount of memory and CPU time. The selection of those models and the configuration of those components highly influence the memory requirements.</p>
</div>
<div class="paragraph">
<p>Analysis are precessed asynchronously in a thread pool with a fixed size. The size of this pool should not exceed the number of available CPU cores. For a full utilization of the
CPU resources the number of threads should be close or equals to the number of CPU cores. However every processing thread will also require additional memory. While this number highly depends on the analysis configuration 500 MByte is a good number to start with.</p>
</div>
<div class="paragraph">
<p>As an example running Smarti with the default Analysis configuration on a host with 16 CPU cores should use a thread pool with 15 threads and will require 3 GByte + 15 * 500 MByte = 10.5 GByte Memory.</p>
</div>
<div class="sect3">
<h4 id="relevant-configuration-options"><a class="anchor" href="#relevant-configuration-options"></a><a class="link" href="#relevant-configuration-options">Relevant Configuration Options</a></h4>
<div class="ulist">
<ul>
<li>
<p><code>smarti.processing.numThreads = 2</code>: The number of analysis processing threads. This number should be close or equals to the number of CPUs. Each thread will also require additional memory to handle processing information. This amount highly depends on the analysis configuration. Especially of the Stanford NLP Parser component (see below).</p>
</li>
<li>
<p>Standord NLP includes several configuration options that influence the memory (both base and processing) memory requirements.</p>
<div class="ulist">
<ul>
<li>
<p><code>nlp.stanfordnlp.de.nerModel = edu/stanford/nlp/models/ner/german.conll.hgc_175m_600.crf.ser.gz</code>: Name Finder models are the biggest contribution to the base memory requirement. The default model uses about 300 MByte</p>
</li>
<li>
<p>Parser: The parsed component has the highest impact on the memory requirements of Smarti. The defautl configuration uses the Shift Reduce Parser as it requires the least memory. As potential configuration options do have a huge impact it is recommended to look at additional information provided by the Stanford <a href="https://nlp.stanford.edu/software/parser-faq.shtml#k">Parser FAQ</a> (NOTE that values provided on this page are for a 32bit JVM. So memory requirements on modern systems will be double those values).</p>
<div class="ulist">
<ul>
<li>
<p><code>nlp.stanfordnlp.de.parseModel = edu/stanford/nlp/models/lexparser/germanPCFG.ser.gz</code>: The parse model to use. Stanford does support three models that have hugely different memory
and cpu requirements. Also not that those memory requirement are for processing memory, what
means that this memory needs to be provided per analysis thread!</p>
</li>
<li>
<p><code>nlp.stanfordnlp.de.parseMaxlen = 30</code>: Parsing longer sentences requires square more memory. So restricting the maximum number of tokens of sentences is essential. 30 Tokens seams to be a good tradeoff. In settings where memory is not a concern this value can be increased to <code>40</code>. If memory consumption is a problem on can decrease this value to 20 tokens.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Open NLP provides an additional Named Entity Finder model for German. The model is provided by <a href="https://github.com/ixa-ehu/ixa-pipe-nerc">IXA Nerc</a> and requires about 500 MByte of memory.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-configuration-guide"><a class="anchor" href="#smarti-configuration-guide"></a><a class="link" href="#smarti-configuration-guide">Smarti Configuration Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The configuration of Smarti has two different levels</p>
</div>
<div class="sect2">
<h3 id="client-configuration"><a class="anchor" href="#client-configuration"></a><a class="link" href="#client-configuration">Client Configuration</a></h3>
<div class="paragraph">
<p>The client configuration allows to define the configuration for specific clients.
Configuration changes are applied immediately (no restart required).
Configuration is done via the <a href="#_client_configuration_web_service">client configuration web service</a> or via the provided configuration UI.</p>
</div>
<div class="sect3">
<h4 id="admin-ui"><a class="anchor" href="#admin-ui"></a><a class="link" href="#admin-ui">Admin UI</a></h4>
<div class="paragraph">
<p>Smarti includes a User Interface to maintain clients and configurations.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://${smarti-host}:${smarti-port}/</pre>
</div>
</div>
<div class="sect4">
<h5 id="client-overview"><a class="anchor" href="#client-overview"></a><a class="link" href="#client-overview">Client Overview</a></h5>
<div class="imageblock">
<div class="content">
<img src="images/overview.png" alt="Client Overview">
</div>
</div>
<div class="paragraph">
<p>The client overview shows all existing clients with its actions.
With <strong>Is Default</strong> you can mark a default client which is used as a copy base if a new client is created by issuing a message.
With <strong>Create Client</strong> you can create an empty client, which <strong>clone</strong> you can use any existing client as a copy base.</p>
</div>
</div>
<div class="sect4">
<h5 id="client-single-view"><a class="anchor" href="#client-single-view"></a><a class="link" href="#client-single-view">Client Single View</a></h5>
<div class="imageblock">
<div class="content">
<img src="images/single_client.png" alt="Single Client View">
</div>
</div>
<div class="paragraph">
<p>The single view of a client enables you to edit basic data and to add, remove an edit query builders.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="application-configuration"><a class="anchor" href="#application-configuration"></a><a class="link" href="#application-configuration">Application Configuration</a></h3>
<div class="paragraph">
<p>Smarti is deployed as Spring Boot Application. It supports all configuration options as <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">documented for Spring Boot</a>.</p>
</div>
<div class="paragraph">
<p>The <code>smarti-application</code> module includes an <code>application.properties</code> file providing defaults. This ensures that Smarti does start correctly without any further configuration needed</p>
</div>
<div class="paragraph">
<p>To apply custom configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When using one of the installation packages for Debian or RedHat the main configuration file is located at <code>etc/smarti/application.properties</code>.</p>
</li>
<li>
<p>When using the runnable JAR the <code>application.properties</code> needs to be in <code>./config</code> or directly in the working directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A list of well known configuration option can be found [here](TODO)</p>
</div>
<div class="sect3">
<h4 id="overview-about-spring-boot-configuration"><a class="anchor" href="#overview-about-spring-boot-configuration"></a><a class="link" href="#overview-about-spring-boot-configuration">Overview about Spring Boot Configuration</a></h4>
<div class="paragraph">
<p>Spring Boot supports a wide range of <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">configuration options</a> including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-command-line-args">Command line Properties</a>:</strong> defining properties as arguments (e.g. <code>--server.port=8080</code>)</p>
</li>
<li>
<p><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-application-property-files">Application Properties</a>:</strong> a Java properties file with the name <code>application.properties</code></p>
</li>
<li>
<p><strong><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-profile-specific-properties">Profile specific configurations</a>:</strong> requires to</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>activate the profile by setting <code>spring.profiles.active</code></p>
</li>
<li>
<p>provide a <code>application-{profile}.properties</code> file</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configurations also support Placeholders (e.g. <code>app.name=Smarti</code> and later <code>app.description=${app.name} is a Spring Boot application</code>).</p>
</div>
<div class="paragraph">
<p>As alternative to Java properties file Spring Boot allows to use <a href="http://www.yaml.org/start.html">YAML</a></p>
</div>
</div>
<div class="sect3">
<h4 id="configuration-properties"><a class="anchor" href="#configuration-properties"></a><a class="link" href="#configuration-properties">Configuration Properties</a></h4>
<div class="sect4">
<h5 id="mongo-db-configuration"><a class="anchor" href="#mongo-db-configuration"></a><a class="link" href="#mongo-db-configuration">Mongo DB configuration</a></h5>
<div class="paragraph">
<p>Mongo DB is used by Smarti to store client, configuration and conversations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.data.mongodb.uri = mongodb://localhost/smarti</code></p>
</li>
<li>
<p><code>spring.data.mongodb.database = smarti</code></p>
</li>
<li>
<p><code>spring.data.mongodb.host = localhost</code></p>
</li>
<li>
<p><code>spring.data.mongodb.port = 27017</code></p>
</li>
<li>
<p><code>spring.data.mongodb.password =</code></p>
</li>
<li>
<p><code>spring.data.mongodb.username =</code></p>
</li>
<li>
<p><code>smarti.migration.mongo.script-home = /usr/share/smarti/scripts</code> location of the database-migration scripts. When
using on of the provided start-scripts, the database migration will be carried out on startup.</p>
</li>
<li>
<p><code>smarti.storage.mongodb.maxConvMsg = 5000</code> the maximum number of messages for a conversation. If more as this messages are added to a conversation the oldest will be sliced. The intension of this is to keep Conversation data within the <code>16MB</code> limit of MongoDB. see <a href="https://github.com/redlink-gmbh/smarti/issues/281">Smarti #281</a> for more information</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="tomcat-ajp-config"><a class="anchor" href="#tomcat-ajp-config"></a><a class="link" href="#tomcat-ajp-config">Tomcat AJP-Config</a></h5>
<div class="paragraph">
<p>To enable AJP use the following properties</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>tomcat.ajp.enabled=false</code></p>
</li>
<li>
<p><code>tomcat.ajp.protocol=AJP/1.3</code></p>
</li>
<li>
<p><code>tomcat.ajp.port=9090</code></p>
</li>
<li>
<p><code>tomcat.ajp.allow-trace=false</code></p>
</li>
<li>
<p><code>tomcat.ajp.secure=false</code></p>
</li>
<li>
<p><code>tomcat.ajp.scheme=http</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spring-mail-configuration"><a class="anchor" href="#spring-mail-configuration"></a><a class="link" href="#spring-mail-configuration">Spring Mail Configuration</a></h4>
<div class="paragraph">
<p>No core component of Smarti does send mails. However in cases where modules want to send notifications per mail those are the properties used by Spring to configure the Mail Server to use.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.mail.host=</code></p>
</li>
<li>
<p><code>spring.mail.port=</code></p>
</li>
<li>
<p><code>spring.mail.protocol=smtp</code></p>
</li>
<li>
<p><code>spring.mail.username=</code></p>
</li>
<li>
<p><code>spring.mail.password=</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="security-configuration"><a class="anchor" href="#security-configuration"></a><a class="link" href="#security-configuration">Security Configuration</a></h4>
<div class="ulist">
<ul>
<li>
<p><code>security.config.enabled = true</code> - turn security (auth) off/on globally, e.g. for testing</p>
</li>
<li>
<p><code>security.config.implementation = mongo</code> - authentication backend, currently only <code>mongo</code> is supported</p>
</li>
<li>
<p><code>security.config.logout-redirect =</code> - redirect-target after successful logout.</p>
</li>
<li>
<p><code>security.config.mongo.password-hasher = SHA-256</code> - password encryption algorithm</p>
</li>
<li>
<p><code>security.config.mongo.enable-signup = false</code> - enable/disable public account-creation</p>
</li>
<li>
<p><code>security.config.mongo.enable-password-recovery = false</code> - enable/disable password recovery workflow</p>
</li>
<li>
<p><code>security.config.mongo.admin-password =</code> - set the <em>default</em> admin password: on startup, if there is no user with role <code>ADMIN</code>, a new user is created using this password. If left blank, a random password will be generated and printed to the log.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solrlib-configuration"><a class="anchor" href="#solrlib-configuration"></a><a class="link" href="#solrlib-configuration">SolrLib Configuration</a></h4>
<div class="paragraph">
<p><a href="https://github.com/redlink-gmbh/solrlib/">SolrLib</a> is a library that allows to use Solr in Spring. It supports embedded, standalone and cloud versions of Solr by adding the according modules.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>solrlib.home = /absolute/path/to/solr/home</code>: The <code>${SOLR_HOME}</code> directory, Used by embedded and standalone. <strong>NOTE:</strong> In case an embedded Solr Server is used it is highly recommended to set <code>solrlib.home</code> to the absolute path where the embedded Solr server will be located. Otherwise a new Solr core will be created in a temp folder on every startup.</p>
</li>
<li>
<p><code>solrlib.base-url = <a href="http://localhost:8983/solr" class="bare">http://localhost:8983/solr</a></code>: base-url for all solr requests. This will trigger using solrlib-standalone if available on the classpath -</p>
</li>
<li>
<p><code>solrlib.zk-connection = zookeeper1:8121,zookeeper2:8121</code>: ZooKeeper connection string. This will trigger using solrlib-cloud if available on the classpath</p>
</li>
<li>
<p><code>solrlib.collection-prefix =</code> prefix for the remote collection names, to avoid name-clashes on shared servers. Only used by standalone and cloud</p>
</li>
<li>
<p><code>solrlib.max-shards-per-node = 1</code>: Only relevant in cloud-mode</p>
</li>
<li>
<p><code>solrlib.deploy-cores = true</code>: option to disable automatic configuration update/deployment to remote servers. You might not have the karma to do so. Only used by standalone and cloud</p>
</li>
<li>
<p><code>solrlib.delete-on-shutdown = false</code>: option to delete the solrlib-home upon shutdown. Only used by embedded</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="other-properties"><a class="anchor" href="#other-properties"></a><a class="link" href="#other-properties">Other properties</a></h4>
<div class="paragraph">
<p><strong>UI Cache</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ui.cache.maxAge = 864000</code>: The maximum age of elements in the cache in seconds (default: <code>864000</code> - 10 days). If <code>&lt; 0</code> no cache will be used.</p>
</li>
<li>
<p><code>ui.cache.indexMaxAge = 3600</code>: The maximum age of a cached <code>index.hmtl</code> (default: <code>3600</code> - 1 hour). If <code>&lt; 0</code> no cache will be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>CORS</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cors.enabled = true</code>: allows to enable/disable Cors</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Property Injection</strong></p>
</div>
<div class="paragraph">
<p>Allows to inject backend properties in the Frontend</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>resource.transform.inject.text = constants*.js</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Default Wbservice Error Handler</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>webservice.errorhandler.writetrace = false</code>: Note that even if disabled stacktraces for <code>5**</code> responses will be logged.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Jsonp callback</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>jsonp.callback = callback</code>: The name of the callback</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="http-callback-configuration"><a class="anchor" href="#http-callback-configuration"></a><a class="link" href="#http-callback-configuration">Http Callback configuration</a></h4>
<div class="ulist">
<ul>
<li>
<p><code>http.retryCount=3</code></p>
</li>
<li>
<p><code>http.callback.proxy.hostname=127.0.0.1</code></p>
</li>
<li>
<p><code>http.callback.proxy.port=8181</code></p>
</li>
<li>
<p><code>http.callback.proxy.scheme=http</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For versions up to <code>0.6.*</code> the following properties where supported to configure the async. callback to Rocket.Chat</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>rocketchat.proxy.hostname =</code></p>
</li>
<li>
<p><code>rocketchat.proxy.port = 80</code></p>
</li>
<li>
<p><code>rocketchat.proxy.scheme = http</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="speak-service"><a class="anchor" href="#speak-service"></a><a class="link" href="#speak-service">Speak Service</a></h4>
<div class="paragraph">
<p>The Speak Service managed resource bundles for bot generated replay messages in conversations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>message.locale = de_DE</code></p>
</li>
<li>
<p><code>message.source =</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="conversation-indexing"><a class="anchor" href="#conversation-indexing"></a><a class="link" href="#conversation-indexing">Conversation Indexing</a></h4>
<div class="paragraph">
<p>Conversation are indexed in Solr managed by SolrLib</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>smarti.index.rebuildOnStartup = true</code>: Allows to enable/disable a full rebuild of indexes on startup (default: <code>false</code>)</p>
</li>
<li>
<p><code>smarti.index.sync.epochSize = 10000</code>: The epoch size ist the maximum number of conversation IDs of updated conversations loaded from the conversation repository. This is needed because of <a href="https://docs.mongodb.com/manual/core/aggregation-pipeline-limits/">MongoDB limitations for aggregations</a> for some supported Mongo versions to be limited as.</p>
</li>
<li>
<p><code>smarti.index.sync.batchSize = 1</code>: The batch size for loading conversations from the Conversation Repository. The default is set to <code>1</code> to reduce the memory footprint. When setting to higher values ensure that sufficient heap is available (recommended about <code>500MByte</code> times the configured number)</p>
</li>
<li>
<p><code>smarti.index.conversation.commit-within = 10000</code>: Defines the maximum time span until after published conversations are available in the index. Values are in M´milliseconds. For values <code>&lt; 0</code> the default <code>10</code> seconds will be used. For values <code>&gt;= 0 &lt; 1000</code> the minimum value of <code>1000ms</code> will be used.</p>
</li>
<li>
<p><code>smarti.index.conversation.sync-delay = 15000</code>: Defines the period between the synchronization of the conversation index with the conversation repository (default: <code>15000</code> ms, min: <code>5000</code> ms)</p>
</li>
<li>
<p><code>smarti.index.conversation.reindex-cron=</code>: The cron trigger for full rebuilds of the conversation index (default: none - no rebuild)</p>
</li>
<li>
<p><code>smarti.index.conversation.message.merge-timeout = 30</code>: Multiple messages of the same users are merged to a single message if they where sent within the configured time period. Values are in Seconds. The default is <code>30</code> seconds.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="processing-configuration"><a class="anchor" href="#processing-configuration"></a><a class="link" href="#processing-configuration">Processing Configuration</a></h4>
<div class="paragraph">
<p>Configures the amount of system resources used by Smarti to do processing (mainly analysis)</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>smarti.processing.numThreads =</code>: The number of analysis threads can be configured by  the default value is <code>2</code>. For every thread one should preserve <code>~500MByte</code> additional Java Heap space. For the best usage of CPU power the number of threads should be the same as the number of cores.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="analysis-configuration"><a class="anchor" href="#analysis-configuration"></a><a class="link" href="#analysis-configuration">Analysis Configuration</a></h4>
<div class="paragraph">
<p>This section describes the configuration of the analysis workflow and the <a href="#_analysis_components">Analysis Components</a></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
For now Analysis configurations are global. No Client specific configuration is possible.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Client specific analysis configurations are planed for a future release. They will use the <a href="#_client_configuration_web_service">client configuration web service</a>.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="basic-configuration"><a class="anchor" href="#basic-configuration"></a><a class="link" href="#basic-configuration">Basic Configuration</a></h5>
<div class="ulist">
<ul>
<li>
<p><code>smarti.analysis.language</code>: The language of conversations. If present language detection will be deactivated and the configured language is assumed for all conversations. NOTE: This configuration can be overruled by a client specific configuration set by the configuration service</p>
</li>
<li>
<p><code>smarti.analysis.conextSize</code>: The size of the context (in number of messages) used for analysis. If a conversation includes more as <code>conextSize</code> messeages only the last <code>conextSize</code> will be used for analysis. If a value <code>&#8656; 0</code> is configured all messages will be analysed.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A higer <code>conextSize</code> results in longer processing times and slightly higher memory requirements. A small <code>conextSize</code> may result in lower quality of analysis results. Currently the minimum size of the context is <code>3</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="analysis-pipeline"><a class="anchor" href="#analysis-pipeline"></a><a class="link" href="#analysis-pipeline">Analysis Pipeline</a></h5>
<div class="paragraph">
<p>The analysis pipeline used to process conversations can be configured by the following properties</p>
</div>
<div class="ulist">
<ul>
<li>
<p>`smarti.analysis.pipeline.required = ` comma separated list of required analysis component (empty if none are required). If required components are missing the Analysis Service will not start</p>
</li>
<li>
<p><code>smarti.analysis.pipeline.optional = *,!keyword.interestingterms.conversation</code>: comma separated list of optional analysis component.</p>
<div class="ulist">
<ul>
<li>
<p>comma separated list of names to explicitly define the processors to be used</p>
</li>
<li>
<p><code>*</code> to include all. If activated <code>!{name}</code> can be used to exclude specific analysis components.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>In additiona the <code>smarti.analysis.language</code> allows to set the lanugage of conversation. If set this language will be used for conversations. If not present or empty the language will be detected based on the content.</p>
</div>
</div>
<div class="sect4">
<h5 id="stanford-nlp"><a class="anchor" href="#stanford-nlp"></a><a class="link" href="#stanford-nlp">Stanford NLP</a></h5>
<div class="paragraph">
<p>Stanford NLP <code>3.8.0</code> can be used for NLP processing of German language texts. With no configuration in place it will use the default configuration as provided by the German model files of the Stanford distribution.</p>
</div>
<div class="paragraph">
<p>The following configuration properties allow to change the configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>nlp.stanfordnlp.de.posModel=</code> (default: <code>edu/stanford/nlp/models/pos-tagger/german/german-hgc.tagger</code>)</p>
</li>
<li>
<p><code>nlp.stanfordnlp.de.nerModel=</code> (default: <code>edu/stanford/nlp/models/ner/german.conll.hgc_175m_600.crf.ser.gz</code>): Allows to include custom built NER models. Multiple models are separated by <code>,</code>.</p>
</li>
<li>
<p><code>nlp.stanfordnlp.de.parseModel=</code> (default: <code>edu/stanford/nlp/models/lexparser/germanPCFG.ser.gz</code>): The default is a good tradeof on quality, memory and speed. Consider <code>edu/stanford/nlp/models/srparser/germanSR.ser.gz</code> for lower memory footprint and higher speed.</p>
</li>
<li>
<p><code>nlp.stanfordnlp.de.parseMaxlen=</code> (default: <code>30</code>): Memory consumption increases with the square of this number. <code>30</code> is ok for <code>4g</code> heap.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the <code>parseModel</code> Stanford includes three models</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PCFG Parser (<code>edu/stanford/nlp/models/lexparser/germanPCFG.ser.gz</code>): This is the default parser configured for Smarti.
It runs fine with <code>4g</code> of heap and <code>parseMaxlen &#8656; 30</code> (<code>parseMaxlen &#8656; 40</code> is borderline ok)</p>
</li>
<li>
<p>Factored Parser (<code>edu/stanford/nlp/models/lexparser/germanFactored.ser.gz</code>): This is the default of Stanford NLP.
It is the slowest and needs a lot of memory (especially with <code>parseMaxlen &gt; 30</code>).
Do NOT use this parser with setups providing <code>&lt;8g</code> java heap (<code>-Xmx8g</code>)</p>
</li>
<li>
<p>Shift Reduce Parser (<code>edu/stanford/nlp/models/srparser/germanSR.ser.gz</code>): This is the fastest parser option available and recommended in situations where problems with the PCFG Parser occure.
For more information see its <a href="https://nlp.stanford.edu/software/srparser.shtml">documentation</a> on Stanford NLP.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The maximal parse length (<code>nlp.stanfordnlp.de.parseMaxlen</code>) defines the maximum number of tokens a sentence can have to be processed by the parser. As the memory requirement of the parser is roughly the square of the sentence length. <a href="https://nlp.stanford.edu/software/parser-faq.shtml#k">More information</a> are available in the parser FAQ.</p>
</div>
</div>
<div class="sect4">
<h5 id="interesting-term-configuration"><a class="anchor" href="#interesting-term-configuration"></a><a class="link" href="#interesting-term-configuration">Interesting Term Configuration</a></h5>
<div class="paragraph">
<p>The <a href="#_interesting_terms">Interesting Terms</a> component performs a keyword extraction. It uses <code>tf-idf</code> of words in a document corpus to mark the most relevant words of a conversation. Implementation wise Solr is used to manage the text corpus and Solr MLT requests are used to retrieve relevant terms.</p>
</div>
<div class="paragraph">
<p>Their are several ways to configure Solr endpoints to be used for interesting terms.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>keyword.solrmlt[0].name = my-corpus</code>: name suffix for the analysis component name. MUST BE unique.</p>
</li>
<li>
<p><code>keyword.solrmlt[0].url = <a href="http://localhost:8983/solr/my-corpus" class="bare">http://localhost:8983/solr/my-corpus</a></code>: The URL of the Solr endpoint</p>
</li>
<li>
<p><code>keyword.solrmlt[0].field = text_gen</code>: The default field used in cases the lanugage is unknown or as fallback if no field is configured for the language of the conversation</p>
</li>
<li>
<p><code>keyword.solrmlt[0].lang.{lang} = {field}</code>: The field to be used for <code>{lang}</code> (e.g. for German: <code>keyword.solrmlt[0].lang.de = text_de</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above configuration requires a Solr Server. To allow the use of embedded Solr Servers specific modules are required. Currenty two of those exist.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>solrcore.wikipedia.de.resource =</code> Absolute path to the archive with the German Wikipedia Corpus.</p>
</li>
<li>
<p><code>solrcore.crawl.systel.resource =</code> Absolute path to the archive with the crawl of Systel related Webpages</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>NOTE:</strong> The archives with the Solr cores are separate downloads. The cores are initialized on the embedded Solr server managed by <a href="https://github.com/redlink-gmbh/solrlib/">SolrLib</a></p>
</div>
</div>
<div class="sect4">
<h5 id="token-filter-stopword"><a class="anchor" href="#token-filter-stopword"></a><a class="link" href="#token-filter-stopword">Token Filter: Stopword</a></h5>
<div class="paragraph">
<p>The <a href="#_token_filter">Token Filter</a> allows to remove Keywords from a Conversation that are present in a configured stop-word list.</p>
</div>
<div class="paragraph">
<p><strong>Module:</strong> <code>token-processor</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>processor.token.stopword.default = {spring-resource}</code> : List of stop words used for any language (in addition to language specific stopwords)</p>
</li>
<li>
<p><code>processor.token.stopword.{lang} = {spring-resource}</code>: list of stop words for the language <code>lang</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>lang</code> is the 2 letter ISO language code (e.g. <code>de</code> for German)</p>
</li>
<li>
<p><code>spring-resource</code> are loaded as <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/html/resources.html">Spring Resource</a>. Therefore <code>classpath:</code>, <code>file:</code> and URL resources (<code>http(s):</code>, <code>ftp:</code>) can be used.</p>
</li>
<li>
<p>Stopword lists a text files with a single word per line. Empty lines and lines starting with <code>#</code> are ignored.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="hasso-extraction"><a class="anchor" href="#hasso-extraction"></a><a class="link" href="#hasso-extraction">Hasso Extraction</a></h5>
<div class="paragraph">
<p>Hasso was a spefic use case of the predecessor of Smarti. The module <code>hasso-vocabulary-extractor</code> provides two vocabulary based keyword extraction components.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>smarti.extractor.synonyms.db =</code> <code>CSV</code> file with <code>;</code> as column separator and <code>utf-8</code> as encoding. One vocabulary entry per row. The value in the first column is the preferred label. Additional columns for synonyms. The content is expected to be in German language. Extracted Entities will have the type <code>term</code> and the tag <code>db-entity</code>.</p>
</li>
<li>
<p><code>smarti.extractor.synonyms.sap =</code> <code>CSV</code> file with <code>,</code> as column separator and <code>utf-8</code> as encoding. One vocabulary entry per row. The value in the first column is the preferred label. Additional columns for synonyms. The content is expected to be in German language. Extracted Entities will have the type <code>term</code> and the tag <code>sap-entity</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="query-builder-default-configuration"><a class="anchor" href="#query-builder-default-configuration"></a><a class="link" href="#query-builder-default-configuration">Query Builder Default Configuration</a></h4>
<div class="paragraph">
<p>Query Builder are configured per Client via the <a href="#_client_configuration_web_service">Client Configuration</a> service. However a system wide default configuration can be used to initialize configurations for new clients.</p>
</div>
<div class="paragraph">
<p>This section includes configuration properties used to define the default configuration of query builders.</p>
</div>
<div class="sect4">
<h5 id="solr-endpoint-configuration"><a class="anchor" href="#solr-endpoint-configuration"></a><a class="link" href="#solr-endpoint-configuration">Solr Endpoint configuration</a></h5>
<div class="paragraph">
<p>A SolrEndpoint is used by the generic Solr <code>QueryProfider</code> provided by the <code>query-solr</code> module.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The configuration properties described in this section do <em>NOT</em> configure an actual Solr endpoint. They are only used as <strong>defaults</strong> for actual <a href="#_solr_search_query_builder">Solr Search Query Builder</a> configurations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Prefix</strong>: <code>query.solr</code></p>
</div>
<div class="paragraph">
<p><strong>General Properties</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.enabled = false</code> (type: <code>Boolean</code>): The default state for new Solr Endpoint Configurations</p>
</li>
<li>
<p><code>query.solr.solr-endpoint = http(s)://solr-host:port/solr/core-name</code> (type: <code>String</code>): The URL of the Solr Endpoint (Solr Core)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Search Configuration</strong></p>
</div>
<div class="paragraph">
<p>Properties with the prefix <code>query.solr.search</code> define how the Solr query is build from Tokens extracted from the conversation</p>
</div>
<div class="paragraph">
<p>The default will search for <strong>location names</strong> and general <strong>token names</strong> in the default search field of Solr. All other options are deactivated. By setting the following properties those defaults for new Solr Endpoint configurations can be changed.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Title Search</p>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.search.title.enabled = false</code> (type: <code>Boolean</code>, default: <code>false</code>): Title search is disabled by default</p>
</li>
<li>
<p><code>query.solr.search.title.field = title</code> (type: <code>String</code>): The name of the full text field are <code>null</code> or <code>empty</code> to use the default search field</p>
</li>
</ul>
</div>
</li>
<li>
<p>Full-Text Search</p>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.search.full-text.enabled = true</code> (type: <code>Boolean</code>, default: <code>true</code>): Full text search is enabled by default</p>
</li>
<li>
<p><code>query.solr.search.full-text.field =</code> (type: <code>String</code>): The name of the full text field are <code>null</code> or empty to use the default field</p>
</li>
</ul>
</div>
</li>
<li>
<p>Related Document Search</p>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.search.related.enabled = false</code> (type: <code>Boolean</code>, default: <code>true</code>): If related Document search enabled</p>
</li>
<li>
<p><code>query.solr.search.related.fields =</code> (type: <code>List&lt;String&gt;</code>): The fields to use for search for similar documents</p>
</li>
</ul>
</div>
</li>
<li>
<p>Spatial (Geo) Search</p>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.search.spatial.enabled = true</code> (type: <code>Boolean</code>, default: <code>true</code>)</p>
</li>
<li>
<p><code>query.solr.search.spatial.locationNameField =</code> (type: <code>String</code>): The name of the field used to search for location names or <code>null</code> or empty to use the default field</p>
</li>
<li>
<p><code>query.solr.search.spatial.latLonPointSpatialField</code> (type: <code>String</code>): The name of the Solr field using a <code>latLonPointSpatial</code> type to search for documents near a extracted location (with included lat/lon information)</p>
</li>
<li>
<p><code>query.solr.search.spatial.rptField =</code> (type: <code>String</code>): The name of the Solr field using a <code>rpt</code> type to search for documents near a extracted location (with included lat/lon information)</p>
</li>
<li>
<p><code>query.solr.search.spatial.bboxField =</code> (type: <code>String</code>): The name of the Solr field using a <code>bbox</code> type to search for documents near a extracted location (with included lat/lon information)</p>
</li>
</ul>
</div>
</li>
<li>
<p>Temporal Search</p>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.search.temporal.enabled = false</code> (type: <code>Boolean</code>, default: <code>false</code>):</p>
</li>
<li>
<p><code>query.solr.search.temporal.timeRangeField =</code> (type: <code>Boolean</code>, default: <code>false</code>): The name of the Solr field using the <code>DateRangeField</code> type used to search Documents near the extracted Date/Times or Date/Time ranges.</p>
</li>
<li>
<p><code>query.solr.search.temporal.startTimeField =</code> (type: <code>Boolean</code>, default: <code>false</code>): The name of the Solr date field used to search for Documents near extracted Date/Times or the start time of extracted ranges.</p>
</li>
<li>
<p><code>query.solr.search.temporal.endTimeField =</code> (type: <code>Boolean</code>, default: <code>false</code>): The name of the Solr date field used to search for Documents near end date of extracted ranges.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Result Configuration</strong></p>
</div>
<div class="paragraph">
<p>Properties with the prefix <code>query.solr.result</code> are used to define how results are processed. Most important the mappings define how to map fields in Solr documents to fields used in the UI.</p>
</div>
<div class="paragraph">
<p>Setting defaults for mappings is usefull if different cores do share the same or similar <code>schema.xml</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.result.mappings.title =</code> (type: <code>String</code>): The title of the document</p>
</li>
<li>
<p><code>query.solr.result.mappings.description =</code> (type: <code>String</code>): The description to be shown for results</p>
</li>
<li>
<p><code>query.solr.result.mappings.type =</code> (type: <code>String</code>): the type of the document</p>
</li>
<li>
<p><code>query.solr.result.mappings.doctype =</code> (type: <code>String</code>): The document type of the document</p>
</li>
<li>
<p><code>query.solr.result.mappings.thumb =</code> (type: <code>String</code>): The thumbnail for the document</p>
</li>
<li>
<p><code>query.solr.result.mappings.link =</code> (type: <code>String</code>): The link pointing to the resource described by the document.</p>
</li>
<li>
<p><code>query.solr.result.mappings.date =</code> (type: <code>String</code>): The date of the document</p>
</li>
<li>
<p><code>query.solr.result.mappings.source =</code> (type: <code>String</code>): The source of the document</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Solr Defaults Configuration</strong></p>
</div>
<div class="paragraph">
<p>The prefix <code>query.solr.defaults</code> properties can be used to set Solr Params that are included in all
Solr queries (e.g. to set the default field one can define <code>query.solr.defaults.df = my-default-field</code>).</p>
</div>
<div class="paragraph">
<p>Typical examples include</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query.solr.defautls.rows = 10</code>: This sets the number of results to <code>10</code></p>
</li>
<li>
<p><code>query.solr.defautls.df = text</code>: the default search field to <code>text</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>NOTE:</em> Defaults (and invariants) can also be set in the Solr Request hander (<code>solrconf.xml</code>). In cases where one has control over the Solr configuration it is preferable to do so.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="analysis-components"><a class="anchor" href="#analysis-components"></a><a class="link" href="#analysis-components">Analysis Components</a></h4>
<div class="paragraph">
<p>Smarti uses Redlink NLP for the analysis of Conversations. In addition it provides several specific analysis components that are implemented as extensions to Redlink NLP.</p>
</div>
<div class="paragraph">
<p>This documentation focus is on those extensions</p>
</div>
<div class="sect4">
<h5 id="processors"><a class="anchor" href="#processors"></a><a class="link" href="#processors">Processors</a></h5>
<div class="paragraph">
<p>Processors are components that plug directly into Redlink NLP.</p>
</div>
<div class="sect5">
<h6 id="interesting-terms"><a class="anchor" href="#interesting-terms"></a><a class="link" href="#interesting-terms">Interesting Terms</a></h6>
<div class="paragraph">
<p>Interesting Terms is a kind of Keyword Extraction that uses <code>tf-idf</code> over a document corpus to detect the most relevant terms within a conversation. Implementation wise Solr is used to manage the text corpus and Solr MLT requests are used to retrieve relevant terms.</p>
</div>
<div class="paragraph">
<p>It consists of two analysis components:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Interesting Term Extractor</strong> that marks interesting terms in the conversation. As the text in Conversations is typically to short to calculate the importance based on the content external information like the <code>tf-idf</code> value of words are used to calculate the importance of words.</p>
</li>
<li>
<p><strong>Interesting Phrase Collector</strong> that collects interesting terms marked form possible multiple Interesting Term Extractor and creates Tokens for them. This component can optionally use phrases as annotated by phrase extraction and/or dependency parsing to mark whole phrases that contain words marked as interesting terms.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Tokens created by this component have the type <code>Keyword</code> and the Hint <code>interestingTerm</code></p>
</div>
<div class="paragraph">
<p>For more information on the configuration of Interesting Term Extractors see the according <a href="#_interesting_terms">section</a> in the Smarti Configuration</p>
</div>
</div>
<div class="sect5">
<h6 id="token-filter"><a class="anchor" href="#token-filter"></a><a class="link" href="#token-filter">Token Filter</a></h6>
<div class="paragraph">
<p>Analysis Component that applies all registered Token Filters. If a single filter wants to filter a Token the token is removed from the conversation.</p>
</div>
<div class="paragraph">
<p><strong>Stopword Token Filter</strong></p>
</div>
<div class="paragraph">
<p>This Analysis component allows to filter extracted Tokens based on their value. Filtering is done based on stopword lists. One list is used for all languages where additional language specific lists can also be configured.</p>
</div>
<div class="paragraph">
<p>See the <a href="#_token_filter_stopword">Stoword Token Filter configuration</a> section of the Smarti Configuration for more information.</p>
</div>
</div>
<div class="sect5">
<h6 id="token-processor"><a class="anchor" href="#token-processor"></a><a class="link" href="#token-processor">Token Processor</a></h6>
<div class="paragraph">
<p>Analysis Component that allows to process extracted Tokens by defined Rules</p>
</div>
<div class="paragraph">
<p><strong>Regex Token Processing Ruleset</strong></p>
</div>
<div class="paragraph">
<p>Tokens in the original texts are replaced with <code>&lt;{Token.Type}&gt;</code>. This allows to wirte regex patters against the type of the token instead of the actual value.</p>
</div>
<div class="paragraph">
<p>Typically those rules are used to add <code>Hint</code>s to token extracted from a conversation. The following example showns Regex pattern that assigns the <code>from</code> and <code>to</code> hints to <code>Place</code> type tokens extracted from a text</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public MyGermanTokenMatcher(){
    super("de", EnumSet.of(MessageTopic.Reiseplanung),
            EnumSet.of(Type.Date, Type.Place));
    addRule(String.format("vo(?:n|m) (&lt;%s&gt;)", Type.Place), Hint.from);
    addRule(String.format("nach (&lt;%s&gt;)", Type.Place), Hint.to);
}</pre>
</div>
</div>
<div class="paragraph">
<p><em>NOTE:</em> Currently it is not possible to configure Rules. To add Rulesets code needs to be written.</p>
</div>
</div>
<div class="sect5">
<h6 id="negated-token-marker"><a class="anchor" href="#negated-token-marker"></a><a class="link" href="#negated-token-marker">Negated Token Marker</a></h6>
<div class="paragraph">
<p>Adds the hint <code>negated</code> to extracted Tokens if mention of the Token is negated (e.g. "no Pizzaia", "nicht über München")</p>
</div>
</div>
<div class="sect5">
<h6 id="pos-collector"><a class="anchor" href="#pos-collector"></a><a class="link" href="#pos-collector">POS Collector</a></h6>
<div class="paragraph">
<p>Allows to create Tokens for Words with specific Part-of-Speech (POS) tags. By default this component is configured to create Tokens with the type <code>Attribute</code> for words that are classified as adjectives.</p>
</div>
<div class="paragraph">
<p>This analysis components also supports a stopword list with words for those no tokens are created.</p>
</div>
</div>
<div class="sect5">
<h6 id="adjective-location-processor"><a class="anchor" href="#adjective-location-processor"></a><a class="link" href="#adjective-location-processor">Adjective Location Processor</a></h6>
<div class="paragraph">
<p>In German Location mentions often include words that are classified as Adjectives. A typical example would be a reference to the Munich Main Station as <code>Münchner Hauptbahnhof</code>. While Named Entity Recognition (NER) typically marks the noun <code>Hauptbahnhof</code> as place if often fails to also mark the adjective <code>Müncher</code>.</p>
</div>
<div class="paragraph">
<p>This processor looks for cases like this and changes the Named Entity to also include the adjective.</p>
</div>
</div>
<div class="sect5">
<h6 id="url-extractor"><a class="anchor" href="#url-extractor"></a><a class="link" href="#url-extractor">Url Extractor</a></h6>
<div class="paragraph">
<p>Uses a Regex pattern to find URLs mentioned in conversations and makrs them as Named Entities with tag <code>url</code> and type <code>misc</code>. Those Named Entities are later converted to Tokens by the Named Entity Collector.</p>
</div>
</div>
<div class="sect5">
<h6 id="named-entity-collector"><a class="anchor" href="#named-entity-collector"></a><a class="link" href="#named-entity-collector">Named Entity Collector</a></h6>
<div class="paragraph">
<p>This Analysis Component collects low level Named Entity Annotations and adds <code>Token</code> for them to the Conversation. The <code>type</code> and <code>tag</code> of the Named Entity Annotations are mapped to <code>Token.Type</code> and <code>Hints</code>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="templates"><a class="anchor" href="#templates"></a><a class="link" href="#templates">Templates</a></h5>
<div class="paragraph">
<p>Templates are higher level models over extracted <code>Token</code>. Templates defines Slots. Those Slots do have specific Roles and may have [0..*] extracted tokens assigned.</p>
</div>
<div class="sect5">
<h6 id="latch-template"><a class="anchor" href="#latch-template"></a><a class="link" href="#latch-template">LATCH Template</a></h6>
<div class="paragraph">
<p>LATCH is a model for Information Retrieval. The acronym stands for the different search dimensions that are represented as Roles in this template:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>L</strong>ocation: Spatial (Geo) based search. In Smarti Tokens with the <code>Place</code> type are assigned this role</p>
</li>
<li>
<p><strong>A</strong>lphabet: Refers to the full text component of searches. In Smarti the "surface form" of extracted Keywords and Tokens that do not fall into one of the other dimensions are used.</p>
</li>
<li>
<p><strong>T</strong>ime: Refers to the temporal location of the search. In Samrti Tokens with the Time type are assigned this role.</p>
</li>
<li>
<p><strong>C</strong>ategory: Categorizations are also an important search dimension. In Samrti Tokens with the Category type are assigned this role</p>
</li>
<li>
<p><strong>H</strong>ierarchy: Refers to hierarchical searches like Rating Systems ([1..5] Stars, [0..10] Points &#8230;&#8203;) but could also be used for price ranges and similar things. Currently this dimension is not used by Smarti.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All roles in this template are optional. The only requirement is that at least a single <code>Token</code> is assigned to any of the defined roles.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-integration-guide"><a class="anchor" href="#smarti-integration-guide"></a><a class="link" href="#smarti-integration-guide">Smarti Integration Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The development of Smarti follows an API-driven approach (API-first).</p>
</div>
<div class="paragraph">
<p>Whenever new features will be released for Smarti, the first step is to develop the corresponding API.
This means that before developing any Apps or other graphical user interfaces, the API already exists: No feature without an API.
This makes it very easy to integrate Smarti into third party applications.</p>
</div>
<div class="paragraph">
<p>Smarti&#8217;s web services are basically divided into the following five components:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#_conversational_web_service">Conversational Analyzing</a></p>
</li>
<li>
<p><a href="#_conversation_admin_web_service">Conversation Administration</a></p>
</li>
<li>
<p><a href="#_client_configuration_web_service">Client Configuration</a></p>
</li>
<li>
<p><a href="#_user_management_web_service">User Management</a></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
the <a href="#_chat_adapter_web_service">Chat Adapter</a> was removed with <code>v0.7.0</code>. Most of its functionality was integrated in the <a href="#_conversational_web_service">Conversational Analyzing</a> Webservice.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the following sections each web service is introduced briefly.</p>
</div>
<div class="paragraph">
<p>The aim of this documentation is to explain every web service at a high level.
It is not the aim of this documentation to learn how the individual API calls work in detail, but rather to understand what the goal of the individual web services is and why they are built as they are.</p>
</div>
<div class="sect2">
<h3 id="swagger-documentation"><a class="anchor" href="#swagger-documentation"></a><a class="link" href="#swagger-documentation">Swagger documentation</a></h3>
<div class="paragraph">
<p><strong>Smarti&#8217;s web services are designed and documented using Swagger.</strong>
Who is interested in implementing against the RESTful-API should move to Smarti&#8217;s Swagger API documentation.
If Swagger is new to you, follow this link to familiarize yourself with Swagger:
<a href="https://swagger.io/getting-started/">Getting started with Swagger</a></p>
</div>
<div class="paragraph">
<p>At runtime Smarti provides a generated Swagger JSON file that can easily accessed by opening the following URLs within your web browser:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>abstract: <code><a href="http://${smarti-host}:${smarti-port}/v2/api-docs" class="bare">http://${smarti-host}:${smarti-port}/v2/api-docs</a></code></p>
</li>
<li>
<p>specific: <code><a href="http://localhost:8080/v2/api-doc" class="bare">http://localhost:8080/v2/api-doc</a></code></p>
</li>
<li>
<p><a href="swagger.json">Swagger.json</a> (Copy - part of this documentation)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can copy &amp; past the raw JSON from <code><a href="http://${smarti-host}:${smarti-port}/v2/api-docs" class="bare">http://${smarti-host}:${smarti-port}/v2/api-docs</a></code> into any Swagger editor of your choice.
Alternatively Smarti provides a Swagger user interface to browse the API without using external tools:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>abstract: <code><a href="http://${smarti-host}:${smarti-port}/swagger-ui.html" class="bare">http://${smarti-host}:${smarti-port}/swagger-ui.html</a></code></p>
</li>
<li>
<p>specific: <code><a href="http://localhost:8080/swagger-ui.html" class="bare">http://localhost:8080/swagger-ui.html</a></code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="integration-tasks"><a class="anchor" href="#integration-tasks"></a><a class="link" href="#integration-tasks">Integration tasks</a></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Preconditions</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Setup Smarti</p>
</li>
<li>
<p>Create a client</p>
</li>
<li>
<p>Create a client configuration</p>
</li>
<li>
<p>Create a client auth token</p>
</li>
</ol>
</div>
</li>
<li>
<p>Chat Integration</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Store the auth token</p>
</li>
<li>
<p>Authenticate each request</p>
</li>
<li>
<p>Adapt Smarti into Chat (onMessage, callback, onClose)</p>
</li>
<li>
<p>Implement a backend for the integration widget/bot</p>
</li>
</ol>
</div>
</li>
<li>
<p>User Interface</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Implement a widget</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="restful-integration-sequence"><a class="anchor" href="#restful-integration-sequence"></a><a class="link" href="#restful-integration-sequence">RESTful-Integration Sequence</a></h3>
<div class="paragraph">
<p>The <code>/conversation</code> service supports CRUD functionality for Conversation. In Smarti Conversational data are represented by Conversations that contain messages. Data of the chat server need to mapped to this model.</p>
</div>
<div class="paragraph">
<p>The simplest model is to map a channel/room of the chat to a single conversation in Smarti. All messages in that channel/room can be added as messages to the conversation. However integrators may also choose different mappings. In any way, the mapping between channel/rooms and conversations in in the responsibility of the integrator. While it is possible to store channel/room IDs with the conversation it is the responsibility of the integrator to provide this mapping.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chat-sequence-REST-sync.png" alt="RESTful-Integration Sequence">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Conversation: The payload for this operation is optional. If no payload is present Smarti will create an empty conversation and assign an unique ID to it. If a payload is present the provided data are stored. The provided conversation can contain any data (such as existing messages). The ID is always assigned by Smarti.</p>
</li>
<li>
<p>Append a Message: Messages are assigned to conversations therefore all CRUD operations on Messages are in the context of an existing conversation. Smarti allows to set IDs of messages (assumed to be unique within the conversation). Integrators can therefore use message IDs of their chat system. If no message IDs is provided Smarti will assign an unique ID.</p>
</li>
<li>
<p>Analysis results for the current state of the conversation. This is an expensive operation. So expect longer response times (possible in the seconds). To mitigate this Smarti per-processes analysis on changes to conversations. So retrieving an analysis for a conversation that has not changed recently is typically fast. When called immediately after an update pre-processing will not have finished and response times will be longer. The following section provides more information retrieving analysis results asynchronous via a callback.</p>
</li>
<li>
<p>Update conversation fields: Smarti allows to store meta infomation for conversation and messages. Those can be updated and deleted. The key of the field is part of the request path. The value is represented by the JSON playload. A similar possibility exists for messages.</p>
</li>
<li>
<p>Complete Conversation: by setting the <code>meta.staus</code> field to <code>"completed"</code>. Completion of a Conversation does NOT prevent from future modifications, but as an indicator that the conversation is in a state so that it can be used as an information source. Several components allow to exclude none completed conversations from results and suggestions.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>As the analysis of conversation is an expensive opertation the <code>/conversation</code> service supports asynchronous callbacks for analysis results. This mode is activated by including the <code>callback</code> parameter in requests to the conversation service. All CRUD operations that result in modifications of the conversation do support this parameter (see the Swagger documentation for details).</p>
</div>
<div class="paragraph">
<p>The callback needs to be a valid URL supporting POST requests with a <code>application/json</code> payload with the <code>Analysis</code> results.</p>
</div>
<div class="paragraph">
<p>The following figure shows how this works.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/chat-sequence-REST-async.png" alt="RESTful-Integration Sequence">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Conversation: As described above the conversation is created assigned an unique ID and returned to the caller (sync). If a <code>callback</code> is given the results of the analysis is <code>POST</code> to this URL as soon as it is available.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The callback receives an <code>Analysis</code> object that referes the conversation (by <code>id</code>) and the analysed version of the conversation (by <code>modified</code> date).</p>
</li>
</ol>
</div>
</li>
<li>
<p>Append a Message: As with the sync workflow the added message is sent back synchronously. The analysis results of the updated conversation are <code>POST</code> to the provided callback when processing finishes.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>The callback receives an <code>Analysis</code> object that referes the conversation (by <code>id</code>) and the analysed version of the conversation (by <code>modified</code> date).</p>
</li>
</ol>
</div>
</li>
<li>
<p>On Analysis requests providing a <code>callback</code> the request is confrimed by a <code>202 Accepted</code>. The actual analysis is sent to the callback URL (even if it is already pre-processed and available)</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="conversational-web-service"><a class="anchor" href="#conversational-web-service"></a><a class="link" href="#conversational-web-service">Conversational web service</a></h3>
<div class="paragraph">
<p>Through Smarti&#8217;s conversational RESTful-API it can be seamlessly integrated into any Chat-based communication platform.</p>
</div>
<div class="sect3">
<h4 id="conversation-data-model"><a class="anchor" href="#conversation-data-model"></a><a class="link" href="#conversation-data-model">Conversation Data Model</a></h4>
<div class="paragraph">
<p>Conversations in Samrti are based on the following JSON model</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">5a1403a535887bbdfc94b531</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">meta</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">New</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">lastMessageAnalyzed</span><span class="delimiter">&quot;</span></span>: <span class="integer">4</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">channel_id</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">lp3aiunsij2664ft</span><span class="delimiter">&quot;</span></span>
    ]
    <span class="error">/</span><span class="error">*</span> <span class="error">a</span><span class="error">n</span><span class="error">y</span> <span class="error">m</span><span class="error">e</span><span class="error">t</span><span class="error">a</span> <span class="error">f</span><span class="error">i</span><span class="error">e</span><span class="error">l</span><span class="error">d</span><span class="error">s</span> <span class="error">*</span><span class="error">/</span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">be4df619-f273-4d15-b3fb-6fa91b08a71a</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Anonymous User</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">messages</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">{message-id}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">time</span><span class="delimiter">&quot;</span></span>: <span class="integer">1509619512000</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">origin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">User</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">{message-content}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">id</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">hkxkyrwf</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Anonymous User</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">votes</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">metadata</span><span class="delimiter">&quot;</span></span>: {},
      <span class="key"><span class="delimiter">&quot;</span><span class="content">private</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>
    }
  ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">context</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">contextType</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">rocket.chat</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">domain</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">loadtest</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">environment</span><span class="delimiter">&quot;</span></span>: {
      <span class="error">/</span><span class="error">*</span> <span class="error">a</span><span class="error">n</span><span class="error">y</span> <span class="error">e</span><span class="error">n</span><span class="error">v</span><span class="error">i</span><span class="error">r</span><span class="error">o</span><span class="error">n</span><span class="error">m</span><span class="error">e</span><span class="error">n</span><span class="error">t</span> <span class="error">v</span><span class="error">a</span><span class="error">r</span><span class="error">i</span><span class="error">a</span><span class="error">b</span><span class="error">l</span><span class="error">e</span> <span class="error">*</span><span class="error">/</span>
    }
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">lastModified</span><span class="delimiter">&quot;</span></span>: <span class="integer">1511261254233</span>
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: Each conversation has an <code>id</code> that is assigned by Smarti</p>
</li>
<li>
<p><code>meta</code>: meta information about the message.</p>
<div class="ulist">
<ul>
<li>
<p>Smarti allows for any meta fields to be added.</p>
</li>
<li>
<p>the <code>channel_id</code> was used up to <code>v0.6.*</code> to store the ID of the channel. While the mapping of conversation to channel is no longer managed by Smarti starting with version <code>0.7.0</code> this field SHOULD still be used in case an integrator wants to store such mappings within Smarti.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>user</code>: The user that started this conversation.</p>
<div class="ulist">
<ul>
<li>
<p>only the <code>id</code> is required</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>messages</code>: The messages of the conversation in the order as sent</p>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: the id of the message (typically the id as provided by the messaging system). Smarti requires this id to be unique within the conversation.</p>
</li>
<li>
<p><code>time</code>: the time when the message was sent</p>
</li>
<li>
<p><code>origin</code>: the origin of the message (<code>User</code>, <code>Agent</code>)</p>
</li>
<li>
<p><code>content</code>: the textual content of the message</p>
</li>
<li>
<p><code>user</code>: information about the user of this message.</p>
<div class="ulist">
<ul>
<li>
<p>only the <code>id</code> is required</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>votes</code>: allows to set the votes for this message</p>
</li>
<li>
<p><code>metadata</code>: allows for additional metadata to be stored with this message</p>
</li>
<li>
<p><code>private</code>: if <code>true</code> this is a private message. Private messages will not be available for Conversation Search in Smarti.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>context</code>: Contextual information about the message.</p>
<div class="ulist">
<ul>
<li>
<p><code>environment</code>: allows for additional contextual information about the environment</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>lastModified</code>: managed by Smarti this field holds the last modification date of this Conversation in Smarti</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="tokens"><a class="anchor" href="#tokens"></a><a class="link" href="#tokens">Tokens</a></h5>
<div class="paragraph">
<p>Information extracted by Smarti are represented by Tokens and later combined in Templates.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tokens</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">messageIdx</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">start</span><span class="delimiter">&quot;</span></span>: <span class="integer">0</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">end</span><span class="delimiter">&quot;</span></span>: <span class="integer">8</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">origin</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">System</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Physiker</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Keyword</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">hints</span><span class="delimiter">&quot;</span></span>: [
        <span class="string"><span class="delimiter">&quot;</span><span class="content">interestingTerm</span><span class="delimiter">&quot;</span></span>
      ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span>: <span class="float">0.7794291</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>messageIdx</code> is the index of the message within the conversation. <code>start</code> and <code>end</code> are offsets of the mention within the message. <code>-1</code> is allowed for both <code>messageIdx</code>, <code>start</code> and <code>end</code> in cases where a token has no mention in the conversation (e.g. a classification result based on the conversation as a whole would use <code>-1</code> for <code>messageIdx</code>, <code>start</code> and <code>end</code>; a classification of the first message would use <code>messageIdx=0</code> and <code>-1</code> for <code>start</code> and <code>end</code>).</p>
</li>
<li>
<p>The <code>origin</code> specifies who created the Token. Possible values are <code>System</code>, <code>Agent</code>. The value <code>System</code> is reserved for Tokens created by Smarti. Other values are for manual annotations.</p>
</li>
<li>
<p>The <code>state</code> allows for user feedback on Token level. <code>Suggested</code> is reserved for Tokens created by the Smarti processing pipeline. Users can <code>Confirmed</code> and <code>Rejected</code> Tokens. Manually created Tokens should use <code>Confirmed</code>.</p>
</li>
<li>
<p>The <code>type</code> defines the kind of the Token. The <code>type</code> also specifies the data type of the <code>value</code></p>
<div class="ulist">
<ul>
<li>
<p><code>Date</code>: An extracted date/time. This type uses a JSON object with <code>{ "date": "2016-09-01T16:30:00.000Z", "grain": "minute"}</code> as value.</p>
<div class="ulist">
<ul>
<li>
<p><code>date</code> holds the extracted date/time value</p>
</li>
<li>
<p><code>grain</code> specifies the granularity of the extracted value - <code>millisecond</code>, <code>second</code>, <code>minute</code>, <code>hour</code>, <code>day</code>, <code>week</code>, <code>month</code> and <code>year</code> are allowed values.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>Topic</code>: Used for any kind of classification. The value is the identifier of the topic</p>
</li>
<li>
<p><code>Place</code>, <code>Organization</code>, <code>Person</code>, <code>Product</code> and <code>Entity</code>: Extracted named entities of different kinds. <code>Entity</code> shall be used if the named entity is not of any of the more specific kinds.</p>
</li>
<li>
<p><code>Term</code>: A term of a terminology that was mentioned in the conversation</p>
</li>
<li>
<p><code>Keyword</code>: Keywords identified in the conversation. Keywords are important words and phrases within the conversation. In contrast to Terms Keywords are not NOT part of a controlled vocabulary.</p>
</li>
<li>
<p><code>Attribute</code>: Attributions the can modify the meaning of other tokens (e.g. the attribute "romantic" can modify the meaning of the term "restaurant").</p>
</li>
<li>
<p><code>Other</code>: type to be used for Tokens that do not fit any of the above. The real type should by stored as a <code>hint</code></p>
</li>
</ul>
</div>
</li>
<li>
<p><code>hint</code>: Hints allow to store additional information for Tokens. Examples are more specific type information; roles of Tokens (e.g. if a Place is the origin or target of a travel) &#8230;&#8203;</p>
</li>
<li>
<p><code>confidence</code>: the confidence of the Token in the range <code>[0..1]</code></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="templates-2"><a class="anchor" href="#templates-2"></a><a class="link" href="#templates-2">Templates</a></h5>
<div class="paragraph">
<p>An abstraction over single Tokens are Templates. Templates structure extracted information as required for a specific intend. Examples are things like travel planing, location based recommendations, route planing but also more abstract things like information retrieval or related content recommendation</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">templates</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">related.conversation</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">slots</span><span class="delimiter">&quot;</span></span>: [
        {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">role</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Term</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenType</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenIndex</span><span class="delimiter">&quot;</span></span>: <span class="integer">36</span>
        }
      ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">queries</span><span class="delimiter">&quot;</span></span>: [],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span>: <span class="float">0.75306565</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>type</code>: the type refers to the definition this template was build based.</p>
</li>
<li>
<p><code>slots</code>: this are slots of the template.</p>
<div class="ulist">
<ul>
<li>
<p><code>role</code> Templates define different roles for Tokens. Some roles may be multi valued. In this case multiple slots will have the same role.</p>
</li>
<li>
<p><code>tokenType</code>: if present the referenced Token MUST BE of the specified <code>type</code></p>
</li>
<li>
<p><code>required</code>: if this slot is required for the Template to be valid. Required slots are always included in the template. If a required Slot can not be filled with a Token the <code>tokenIndex</code> is set to <code>-1</code></p>
</li>
<li>
<p><code>tokenIndex</code>: the index of the token within the <code>tokens</code> array (<code>-1</code> means unassigned).</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>confidence</code>: the confidence for this template. The confidence is typically used in combination with Intend classification. e.g. given a classification for the intend and templates representing intends the <code>confidence</code> will be set to the confidence of the intend to be present.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="query"><a class="anchor" href="#query"></a><a class="link" href="#query">Query</a></h5>
<div class="paragraph">
<p>Queries are most specific extraction result of Smarti. Queries are used to retrieve information from a service and are build based on a template. Because of that <code>query</code> is also a sub-element of <code>template</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">queries</span><span class="delimiter">&quot;</span></span>: [
    {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">creator</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">queryBuilder%3Aconversationmlt%3Arelated-conversations</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayTitle</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Flug Salzburg -&gt; Berlin (01.09)</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">inlineResultSupport</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">{}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span>: <span class="float">0.75306565</span>
    }
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Common fields supported by all queries include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>creator</code> identifies the component/configuration that created this query.</p>
</li>
<li>
<p>The <code>displayTitle</code> is intended to be used for provide a human readable representation of this query.</p>
</li>
<li>
<p>If <code>inlineResultSupport</code> is <code>true</code> the creator supports server-side execution of the query.</p>
</li>
<li>
<p>The <code>state</code> can be used for user feedback. Every query will start with <code>Suggested</code>. Users can <code>Confirmed</code> and <code>Rejected</code> queries.</p>
</li>
<li>
<p>The <code>url</code> representing this query. If server side execution is supported this might not be present.</p>
</li>
<li>
<p>The <code>confidence</code> specifies how well the service is suited to search for information of the template
(e.g. bahn.de is very suitable for a travel planing template so a query for Bahn.de would get a high confidence.
One could also create a Google Query for travel planing, but results would be less precise so this query should get a lower confidence).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition to those fields queries can provide additional information. Those are specific to the <code>creator</code> of the query.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="working-with-smarti-analysis"><a class="anchor" href="#working-with-smarti-analysis"></a><a class="link" href="#working-with-smarti-analysis">Working with Smarti Analysis</a></h4>
<div class="paragraph">
<p>Smarti processes ongoing Conversations. Those analysis results are available via</p>
</div>
<div class="ulist">
<ul>
<li>
<p>abstract: <code>http(s)://${smarti-host}:${smarti-port}/conversation/{conversationId}/analysis</code></p>
</li>
<li>
<p>specific: <code><a href="https://localhost:8080/conversation/59ed91d9de10751739a82358/analysis" class="bare">https://localhost:8080/conversation/59ed91d9de10751739a82358/analysis</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>or when providing a callback URI asynchronously on most CRUD requests for conversations and messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">conversation</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">5a7befcb27c2da49d629dcab</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> : <span class="integer">1518082127519</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">tokens</span><span class="delimiter">&quot;</span></span> : [ <span class="error">/</span><span class="error">*</span> <span class="error">T</span><span class="error">o</span><span class="error">k</span><span class="error">e</span><span class="error">n</span><span class="error">s</span> <span class="error">*</span><span class="error">/</span> ],
  <span class="key"><span class="delimiter">&quot;</span><span class="content">templates</span><span class="delimiter">&quot;</span></span> : [ <span class="error">/</span><span class="error">*</span> <span class="error">T</span><span class="error">e</span><span class="error">m</span><span class="error">p</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="error">s</span> <span class="error">a</span><span class="error">n</span><span class="error">d</span> <span class="error">Q</span><span class="error">u</span><span class="error">e</span><span class="error">r</span><span class="error">i</span><span class="error">e</span><span class="error">s</span> <span class="error">f</span><span class="error">o</span><span class="error">r</span> <span class="error">T</span><span class="error">e</span><span class="error">m</span><span class="error">p</span><span class="error">l</span><span class="error">a</span><span class="error">t</span><span class="error">e</span><span class="error">s</span> <span class="error">*</span><span class="error">/</span>]
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>conversation</code>: The id of the analysed conversation</p>
</li>
<li>
<p><code>date</code>: the modification date of the conversation - the version of the conversation used for the analysis</p>
</li>
<li>
<p><code>tokens</code>: Information extracted form the conversation. Important as <code>template.slots</code> refer to token indexes</p>
</li>
<li>
<p><code>templates</code>: Templates represent a structured view onto the extracted information.
The <code>type</code> of the template defines the slots it supports and also what queries one can expect for the tempalte.
The <a href="#_latch_template">LATCH template</a> is an example of such a template intended to be used for information retrieval.</p>
</li>
<li>
<p><code>queries</code>: Queries are built based on templates and are typically used to retrieve information related to the conversation from services.
A single template can have multiple queries from different creators (e.g. the LATCH template can have multiple queries for different configured search indexes).</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Queries are NOT executed during processing of the conversation. The client is responsible for execution (typically based on a user interaction).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When <code>inlineResultSupport</code> is <code>true</code> a query can be executed by Smarti. In such cases the <code>url</code> is often not defined - meaning that the query can only be executed by Smarti. To execute a query via smarti the following service has to be used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>abstract: <code>http(s)://${smarti-host}:${smarti-port}/conversation/{conversationId}/template/{templateIndex}/result/{creatorName}</code></p>
</li>
<li>
<p>specific: <code><a href="https://localhost:8080/conversation/59ed91d9de10751739a82358/template/0/result/queryBuilder%3Aconversationmlt%3Arelated-conversations" class="bare">https://localhost:8080/conversation/59ed91d9de10751739a82358/template/0/result/queryBuilder%3Aconversationmlt%3Arelated-conversations</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>{templateIndex}</code> - is the index of the "template" array returned by the <code>/conversation/{conversationId}/template</code> request (e.g. <code>0</code> for the first template in the original response)</p>
</li>
<li>
<p><code>{creatorName}</code> - the value of the <code>creator</code> attribute of the executed query (e.g. the value of <code>template[0].queries[0].creator</code> when executing the first query of the first template)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In a future version it is planed to change referencing of Messages, Tokens and Templates from an index to an ID based model. This will have affects to this webservice.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The response format is not normalised and fully specific for the query type. Server side execution is e.g. used for the related conversation queries.</p>
</div>
<div class="paragraph">
<p>For queries where <code>inlineResultSupport</code> is <code>false</code> the client needs to execute the query.
Typically this can be done by using the <code>url</code> attribute.
However specific queries might provide the information for query execution in additional fields.</p>
</div>
</div>
<div class="sect3">
<h4 id="common-templates-and-query-provider"><a class="anchor" href="#common-templates-and-query-provider"></a><a class="link" href="#common-templates-and-query-provider">Common Templates and Query Provider</a></h4>
<div class="sect4">
<h5 id="related-conversation"><a class="anchor" href="#related-conversation"></a><a class="link" href="#related-conversation">Related Conversation</a></h5>
<div class="paragraph">
<p>The related conversation template allows to find conversation similar to the current one.
Two query provider do use this template:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Similar Conversation:</strong> This searches for similar conversation based on the textual content of the current conversation. It does NOT use extracted tokens but rather uses the content of the messages to search for similar conversations. Starting with <code>v0.7.0</code> only the content of recent messages is used as context. Up to <code>v0.6.*</code> the content of all messages in the conversation was used.</p>
</li>
<li>
<p><strong>Related Conversation Search:</strong> This uses extracted Keywords and Terms to search for related conversations. The search for related conversations uses the  <code>conversation/search</code> service (part of the conversation API).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The following listing shows the structure use by this template and queries</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">related.conversation</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">slots</span><span class="delimiter">&quot;</span></span> : [ {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">role</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Keyword</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenType</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Keyword</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenIndex</span><span class="delimiter">&quot;</span></span> : {<span class="error">t</span><span class="error">o</span><span class="error">k</span><span class="error">e</span><span class="error">n</span><span class="error">-</span><span class="error">i</span><span class="error">d</span><span class="error">x</span>}
    }, {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">role</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Term</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenType</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenIndex</span><span class="delimiter">&quot;</span></span> : {<span class="error">t</span><span class="error">o</span><span class="error">k</span><span class="error">e</span><span class="error">n</span><span class="error">-</span><span class="error">i</span><span class="error">d</span><span class="error">x</span>}
    } ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">queries</span><span class="delimiter">&quot;</span></span> : [ {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">_class</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">io.redlink.smarti.query.conversation.ConversationMltQuery</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayTitle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">conversationmlt</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span> : <span class="float">0.55</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">creator</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">queryBuilder:conversationmlt:conversationmlt</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">inlineResultSupport</span><span class="delimiter">&quot;</span></span> : <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span> : <span class="integer">1518423401234</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">content</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">{textual-context}</span><span class="delimiter">&quot;</span></span>
    }, {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">_class</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">io.redlink.smarti.query.conversation.ConversationSearchQuery</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">creator</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">queryBuilder:conversationsearch:conversationsearch</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayTitle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">conversationsearch</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span> : <span class="float">0.6</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">/conversation/search</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">inlineResultSupport</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span> : <span class="integer">1518423401234</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span> : {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">ctx.before</span><span class="delimiter">&quot;</span></span> : <span class="integer">1</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">rows</span><span class="delimiter">&quot;</span></span> : <span class="integer">3</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">ctx.after</span><span class="delimiter">&quot;</span></span> : <span class="integer">2</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">fl</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">id,message_id,meta_channel_id,user_id,time,message,type</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">keywords</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">{keyword-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">{keyword-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span> ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">terms</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">{term-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">{term-2}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span> ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">queryParams</span><span class="delimiter">&quot;</span></span> : [ ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">filterQueries</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">completed:true</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">-conversation_id:5a7befcb27c2da49d629dcab</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">-meta_support_area:*</span><span class="delimiter">&quot;</span></span> ]
    }, {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">_class</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">io.redlink.smarti.query.conversation.RocketChatSearchQuery</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">creator</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">queryBuilder:rocketchatsearch:rocketchatsearch</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayTitle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Rocket.Chat Search</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span> : <span class="float">0.6</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">inlineResultSupport</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span> : <span class="integer">1518423401234</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">payload</span><span class="delimiter">&quot;</span></span> : {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">rows</span><span class="delimiter">&quot;</span></span> : <span class="integer">3</span>,
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">params</span><span class="delimiter">&quot;</span></span> : {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">excludeCurrentChannel</span><span class="delimiter">&quot;</span></span> : <span class="value">true</span>
      }
      <span class="key"><span class="delimiter">&quot;</span><span class="content">keywords</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">{keyword-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">{keyword-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span> ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">terms</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">{term-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">{term-2}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span> ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">users</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">{user-1}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">{user-2}</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span>],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">contextQuery</span><span class="delimiter">&quot;</span></span> : [{
        <span class="key"><span class="delimiter">&quot;</span><span class="content">term</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">{term-1}</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">relevance</span><span class="delimiter">&quot;</span></span> : <span class="float">1.0</span>
      } , {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">term</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">{term-2}</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">relevance</span><span class="delimiter">&quot;</span></span> : <span class="float">0.912</span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">contextMsgs</span><span class="delimiter">&quot;</span></span> : [<span class="string"><span class="delimiter">&quot;</span><span class="content">{msg-id1}</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">{msg-id2}</span><span class="delimiter">&quot;</span></span>]]
    } ]
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Related Conversation Template:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>related.conversation</code> template has two roles - <code>Keyword</code> and <code>Term</code>. Both allow for multiple assignments.</p>
<div class="ulist">
<ul>
<li>
<p><code>{token-idx}</code> is the index of the token referenced by the slot of the template. <code>-1</code> indicates an unassigend slot.</p>
</li>
<li>
<p>the <code>tokenType</code> defines the required type of the token. For slots with the role <code>Keyword</code> the token type will be <code>Keyword</code>. For role <code>Term</code> slots this will be <code>null</code>. The actual type of the token needs to be obtained from the referenced Token itself.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similar Conversation Query:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Similar Conversation are provided by the <code>ConversationMltQuery</code> query provider</p>
</li>
<li>
<p>The <code>{textual-context}</code> is the context used to search for similar conversations</p>
</li>
<li>
<p>The <code>url</code> is <code>null</code> as this query is server executed. This means that the <code>GET conversation/{conversationId}/template/{templateIndex}/result/{creator}</code> service needs to be used to obtain results.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Related Conversation Search Query:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Related Conversation are provided by the <code>ConversationSearchQuery</code> query provider</p>
</li>
<li>
<p>The <code>url</code> is the to <code>/conversation/search</code> the path the the conversation search service part of the conversation webservice API</p>
</li>
<li>
<p>The <code>keywords</code> and <code>terms</code> are suggested search parameters for the conversation search</p>
<div class="ulist">
<ul>
<li>
<p>they can  be parsed by using the <code>text</code> parameter. In this case prefix and infix searches will be used to the exact match (with different boosts)</p>
</li>
<li>
<p>optionally thy can also be parsed via the Solr <code>q</code> parameter. This allows for more control over the actual search. See Solr Documentation for more information and options</p>
</li>
<li>
<p>the <code>defaults</code> are additional parameter to be parsed to the conversation search service. Those are based on the clients conviguration and should be included unchanged when calling the conversation search service.</p>
</li>
<li>
<p><code>filterQueries</code> are expected to be parsed as is via the Solr <code>fq</code> parameter. They are also calculated based on the clients configuration and expected to be included unchanged on calles to the conversation search service. <strong>NOTE:</strong> that skipping those filter does NOT allow users to retrieve information they do not have acces to as all security relevant restrictions are applied by the conversation search service based on  the authentication information of the call. So removing some/all of those filter does only affect the quality of results.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Rocket.Chat Search Query Builder</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provides parameters that can be used to perform queries for relevant Channels, Users and Messages by using the Rocket.Chat search API</p>
</li>
<li>
<p><code>keywords</code> and <code>terms</code> suggest extracted words to be presented to the user (e.g. as search suggestions)</p>
</li>
<li>
<p><code>users</code> are user ids of users actively participating in the conversation</p>
</li>
<li>
<p><code>params</code> provide configuration parameters of the QueryProvider to the client.</p>
</li>
<li>
<p><code>contextQuery</code> provides search terms and boosts for implicit queries. This are intended to be used to search for relevant information if the user does not interact with the widget</p>
</li>
<li>
<p><code>contextMsgs</code> provide a array of message ids used as context for the context query, keywords and terms. Typically one would like to exclude those messages as results from context searches.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="latch-information-retrieval"><a class="anchor" href="#latch-information-retrieval"></a><a class="link" href="#latch-information-retrieval">LATCH Information Retrieval</a></h4>
<div class="paragraph">
<p>LATCH stands for Location, Alphabet, Time, Category and Hierarchy and represents a well established model for information retrieval.</p>
</div>
<div class="paragraph">
<p>The LATCH templates collects information extracted from the conversation and assigns them to the the different dimensions of the Template (e.g. extracted tokens with the type <code>Time</code> will be assigned to the <code>time</code> dimension; extracted tokens with the type <code>Place</code> will be assigned to the <code>location</code> dimension &#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Based on this template a generic query builder for Apache Solr endpoints is implemented. This query builder can be configured for Solr search endpoints so that information related to the current conversation can be suggested to the user.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
    <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">ir_latch</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">slots</span><span class="delimiter">&quot;</span></span> : [ {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">role</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">{role}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenType</span><span class="delimiter">&quot;</span></span> : {<span class="error">t</span><span class="error">y</span><span class="error">p</span><span class="error">e</span>},
      <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">tokenIndex</span><span class="delimiter">&quot;</span></span> : {<span class="error">t</span><span class="error">o</span><span class="error">k</span><span class="error">e</span><span class="error">n</span><span class="error">-</span><span class="error">i</span><span class="error">d</span><span class="error">x</span>}
    } ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">probability</span><span class="delimiter">&quot;</span></span> : <span class="float">0.0</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">queries</span><span class="delimiter">&quot;</span></span> : [ {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">_class</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">io.redlink.smarti.query.solr.SolrSearchQuery</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">creator</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">queryBuilder:solrsearch:config-name-1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">resultConfig</span><span class="delimiter">&quot;</span></span> : {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">mappings</span><span class="delimiter">&quot;</span></span> : {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">source_field</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">title_field</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">desc_field</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">type_field</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">doctype</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">link</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">link_field</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">date_field</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">thumb</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">thumb_field</span><span class="delimiter">&quot;</span></span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">numOfRows</span><span class="delimiter">&quot;</span></span> : <span class="integer">10</span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span> : { },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayTitle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">config-title-1</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span> : <span class="float">0.8</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">https://search.host-1.org/query?{solr-query-parameter}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">inlineResultSupport</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span> : <span class="integer">1518433563606</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">queryParams</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">address_cityplz_de:</span><span class="char">\&quot;</span><span class="content">Salzburg</span><span class="char">\&quot;</span><span class="content">^0.8478922</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">context_de:</span><span class="char">\&quot;</span><span class="content">Tätowieren</span><span class="char">\&quot;</span><span class="content">^0.39709732</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">title_de_sv:</span><span class="char">\&quot;</span><span class="content">Tätowieren</span><span class="char">\&quot;</span><span class="content">^1.1912919</span><span class="delimiter">&quot;</span></span> ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">filterQueries</span><span class="delimiter">&quot;</span></span> : [ ]
    }, {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">_class</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">io.redlink.smarti.query.solr.SolrSearchQuery</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">creator</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">queryBuilder:solrsearch:config-name-2</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">resultConfig</span><span class="delimiter">&quot;</span></span> : {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">mappings</span><span class="delimiter">&quot;</span></span> : {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">doctype</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">link</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">release_date</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">thumb</span><span class="delimiter">&quot;</span></span> : <span class="value">null</span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">numOfRows</span><span class="delimiter">&quot;</span></span> : <span class="integer">5</span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span> : {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">fq</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">structure:(type_1 OR type_2)</span><span class="delimiter">&quot;</span></span>
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">displayTitle</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Stadt Salzburg</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">confidence</span><span class="delimiter">&quot;</span></span> : <span class="float">0.8</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">url</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">https://www.host-2.com/search/select?fq=structure%3A(type_1%20OR%20type_2)&amp;{solr-query-parameter}</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">inlineResultSupport</span><span class="delimiter">&quot;</span></span> : <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">created</span><span class="delimiter">&quot;</span></span> : <span class="integer">1518433563606</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">state</span><span class="delimiter">&quot;</span></span> : <span class="string"><span class="delimiter">&quot;</span><span class="content">Suggested</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">queryParams</span><span class="delimiter">&quot;</span></span> : [ <span class="string"><span class="delimiter">&quot;</span><span class="content">content:</span><span class="char">\&quot;</span><span class="content">Tätowieren</span><span class="char">\&quot;</span><span class="content">^0.39709732</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">title:</span><span class="char">\&quot;</span><span class="content">Tätowieren</span><span class="char">\&quot;</span><span class="content">^1.1912919</span><span class="delimiter">&quot;</span></span> ],
      <span class="key"><span class="delimiter">&quot;</span><span class="content">filterQueries</span><span class="delimiter">&quot;</span></span> : [ ]
    } ]
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>LATCH Information Retrieval</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the type of this template is <code>ir_latch</code></p>
</li>
<li>
<p>it supports the following roles: <code>location</code>, <code>alphabet</code>, <code>time</code>, <code>category</code> and <code>hierarchy</code></p>
<div class="ulist">
<ul>
<li>
<p>all roles are optional and allow for multiple assignments.</p>
</li>
<li>
<p>some Roles require specific types: <code>location</code> &#8594; <code>Place</code>, <code>time</code> &#8594; <code>Date</code>, <code>category</code> &#8594; <code>Topic</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Solr Search Query</p>
</div>
<div class="ulist">
<ul>
<li>
<p>generic query provider that can be configured for a specific Solr Endpont</p>
</li>
<li>
<p>the <code>resultConfig</code> is copied from the configuration and defines the Solr field names to be used for the visualisation of results. The <code>numOfRows</code> is the number of results per page.</p>
</li>
<li>
<p>the <code>url</code> represents the Solr request representing the data provided by the query provider. If the client wants to modify the query it needs to strip the query part from the URL and create the query parameter to reflect the intended modifications</p>
</li>
<li>
<p><code>defaults</code> are query parameters to be included in the request. They originate form the client configuration.</p>
<div class="ulist">
<ul>
<li>
<p>the second example shows how a <code>fq</code> (filter query) is configuerd in the defaults. NOTE that this is also present as query paramter in the <code>url</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>the <code>queryParams</code> represent parts of the Solr query (<code>q</code> parameter) generated for the extracted tokens and the solr fields as defined by the configuration.</p>
<div class="ulist">
<ul>
<li>
<p>in the first example the <code>config-name-1</code> has mappings for locations and full text search. Because of that the extracted token <code>Salzburg</code> with the type <code>Place</code> is used as query parameter for the location name field <code>address_cityplz_de</code>. The token <code>Tätowieren</code> with the type <code>Keyword</code> is used for full text search. First in the title field <code>title_de_sv</code> with a boost of <code>1.1912919</code> and second in the full text field <code>context_de</code> with a lower boost of <code>0.39709732</code></p>
</li>
<li>
<p>the second example <code>config-name-2</code> hos no field to search for locations. Because of this only <code>Tätowieren</code> is included in the query parameters</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>filterQueries</code> are additional filters set by the query provider based on the conversation (e.g. based on detected categories). Values need to be parsed as <code>fq</code> parameters in the Solr query.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="legacy-webservice"><a class="anchor" href="#legacy-webservice"></a><a class="link" href="#legacy-webservice">Legacy Webservice</a></h3>
<div class="paragraph">
<p>Smarti version up tp <code>v0.6.*</code> where managing the mapping of channel/room IDs to conversation. From <code>v0.7.0</code> onwards those mappings need to be managed by the integrator.</p>
</div>
<div class="paragraph">
<p>This change comes with the requirement that Smarti <code>v0.6.*</code> users that migrate to <code>v0.7.0</code> do have a possibility to lookup conversation IDs for channel/rooms that where processed before the migration.</p>
</div>
<div class="paragraph">
<p>For this case the Legacy Webservice provide such a lookup:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>GET /legacy/rocket.chat?channel_id={channel-id}</code></pre>
</div>
</div>
<div class="paragraph">
<p>A call to this service will return the <code>Conversation</code> for the parsed <code>channel-id</code> or <code>404 Not Found</code> if the channel is not known by Smarti</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The service is intended for an initial lookup. Integrators SHOULD store <code>cannel-id</code> to <code>conversation-id</code> mappings after the initial lookup.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="integrations"><a class="anchor" href="#integrations"></a><a class="link" href="#integrations">Integrations</a></h3>
<div class="sect3">
<h4 id="rocket-chat"><a class="anchor" href="#rocket-chat"></a><a class="link" href="#rocket-chat">Rocket.Chat</a></h4>
<div class="paragraph">
<p>For now Smarti is working with <a href="https://rocket.chat">Rocket.Chat</a> conversations, where it can be smoothly integrated via a <a href="https://github.com/assistify/Rocket.Chat">RC plugin</a>.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>http://${smarti-host}:${smarti-port}/plugin/v1/rocket.chat.js</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Up until version <code>v0.6.*</code> the integration with rocket chat was implemented by the Rocket-Chat Endpoint - a wervserivce provided by Smarti. This web service was removed with <code>v0.7.0</code> and replaced by the Smarti-Widget code directly working with the conversation webservice.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>TODO</strong></p>
</div>
<div class="paragraph">
<p>The Rocket.Chat Plugin consists of three parts:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The Rocket.Chat integration code</p>
</li>
<li>
<p>The Smarti backend adapter</p>
</li>
<li>
<p>The Smarti frontend plugin</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rocket-chat-integration-sequence"><a class="anchor" href="#rocket-chat-integration-sequence"></a><a class="link" href="#rocket-chat-integration-sequence">Rocket.Chat Integration Sequence</a></h3>
<div class="imageblock">
<div class="content">
<img src="images/rocket.chat-integration.png" alt="Rocket.Chat Integration Sequence">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The integration does not react on the creation of a chat room</p>
</li>
<li>
<p>When sending a message the widget is notified by the <code>onMessage</code> method. At that points its checks if a Smarti Conversation is already present for the room of the message.</p>
</li>
<li>
<p><strong>Case A:</strong> If no Conversation is present the widget creates a new Smarti Conversation. To save additional requests it (a) includes the current message when creating the conversation and (b) it sets <code>analysis=true</code> so that Smarti includes the analysis results in the response</p>
</li>
<li>
<p><strong>Case B:</strong> If a Conversation is mapped to the room of the current message the message is appended to the conversation and the analysis for the updated conversation is requested</p>
</li>
<li>
<p>As soon as the Analysis is available the <code>notifyRoom</code> is called. This will update the Knowledge Base View.</p>
</li>
<li>
<p>If the users closes a room the <code>onClose</code> method of the widget sets the status of the Smarti Conversation to <code>complete</code></p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="client-configuration-web-service"><a class="anchor" href="#client-configuration-web-service"></a><a class="link" href="#client-configuration-web-service">Client configuration web service</a></h3>
<div class="paragraph">
<p>Smarti supports a multi client architecture, that allows to create separate knowledge bases for different domains/clients.
The configuration module allows to manage client specific configurations.
It consists of a storage component, a service layer, REST services and an UI.</p>
</div>
<div class="paragraph">
<p><em>base path:</em> <code>/client</code></p>
</div>
<div class="paragraph">
<p>The configuration REST Services allow to manage clients and configurations via API calls.</p>
</div>
<div class="paragraph">
<p>All endpoints use <code>application/json</code> as media type.</p>
</div>
<div class="sect3">
<h4 id="create-update-client"><a class="anchor" href="#create-update-client"></a><a class="link" href="#create-update-client">Create/Update Client</a></h4>
<div class="paragraph">
<p><em>endpoint:</em> <code>POST /client</code><br>
<em>request body:</em> <code>{"name":&#8230;&#8203;, "description":..}</code><br>
<em>response body:</em> the created/updated client configuration <code>{"id":&#8230;&#8203;, "name":&#8230;&#8203;, "description":..}</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X POST -H &quot;content-type: application/json&quot; &quot;http://localhost:8080/client&quot; -d '{&quot;name&quot;:&quot;client-42&quot;}'</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The clients name has to match the pattern [a-z0-9-]+ (it is used also for posting messages)
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="list-clients"><a class="anchor" href="#list-clients"></a><a class="link" href="#list-clients">List Clients</a></h4>
<div class="paragraph">
<p><em>endpoint:</em> <code>GET /client</code><br>
<em>response body:</em> a list of clients <code>[{"id":"1","name":"client_42","description","Some description"}]</code></p>
</div>
</div>
<div class="sect3">
<h4 id="get-client-configuration"><a class="anchor" href="#get-client-configuration"></a><a class="link" href="#get-client-configuration">Get Client Configuration</a></h4>
<div class="paragraph">
<p><em>endpoint:</em> <code>POST /client/{client-id}/config</code><br>
<em>response body:</em> the updated client configuration <code>{&lt;conf-cat&gt;: [&lt;comp-conf&gt;,&lt;comp-conf&gt;]}</code></p>
</div>
<div class="paragraph">
<p><em>example:</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X GET -H &quot;content-type: application/json&quot; &quot;http://localhost:8080/client/client_42/config&quot;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="update-client-configuration"><a class="anchor" href="#update-client-configuration"></a><a class="link" href="#update-client-configuration">Update Client Configuration</a></h4>
<div class="paragraph">
<p><em>endpoint:</em> <code>POST /client/{client-id}/config</code><br>
<em>request body:</em> <code>{&lt;conf-cat&gt;: [&lt;comp-conf&gt;,&lt;comp-conf&gt;]}</code><br>
<em>response body:</em> the updated client configuration <code>{&lt;conf-cat&gt;: [&lt;comp-conf&gt;,&lt;comp-conf&gt;]}</code></p>
</div>
<div class="paragraph">
<p>The endpoint accepts an request body with the configuration.</p>
</div>
<div class="paragraph">
<p>All updated configurations are validates (see the [Client Configuration Validation](#clientConfigurationValidation) section for more information)</p>
</div>
<div class="paragraph">
<p><em>example:</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X POST -H &quot;content-type: application/json&quot; &quot;http://localhost:8080/client/client_42/config&quot;
{
  &quot;queryBuilder&quot;: [
    {
      &quot;_class&quot;: &quot;io.redlink.smarti.query.solr.SolrEndpointConfiguration&quot;,
      &quot;name&quot;: &quot;solrsearch&quot;,
      &quot;displayName&quot;: &quot;solrsearch&quot;,
      &quot;type&quot;: &quot;solrsearch&quot;,
      &quot;enabled&quot;: false,
      &quot;unbound&quot;: false,
      &quot;solrEndpoint&quot;: &quot;http://search.db.de/change/me&quot;,
      [ ... ]
    },
    [ ... ]
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Notes about Server Side Configuration parsing</em></p>
</div>
<div class="paragraph">
<p>Server-side parsing is done by <a href="https://github.com/FasterXML/jackson">Jackson</a>. The default <code>ComponentConfiguration</code> class parses additional parameters as <code>Map</code>. So By default configuration will use the default JSON to Java mappings.</p>
</div>
<div class="paragraph">
<p>Components that use custom configuration classes can define additional fields. Additioal fields will be handeld as with the base <code>ComponentConfiguration</code> class.</p>
</div>
</div>
<div class="sect3">
<h4 id="component-configuration"><a class="anchor" href="#component-configuration"></a><a class="link" href="#component-configuration">Component Configuration</a></h4>
<div class="paragraph">
<p>The JSON serialization of a configuration has the following base attributes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">{
  &quot;_class&quot;: &quot;io.redlink.smarti.query.solr.SolrEndpointConfiguration&quot;,
  &quot;name&quot;: &quot;solrsearch&quot;,
  &quot;displayName&quot;: &quot;solrsearch&quot;,
  &quot;type&quot;: &quot;solrsearch&quot;,
  &quot;enabled&quot;: false,
  &quot;unbound&quot;: false,
  [...]
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><em>`_class`</em> (<code>String</code>): used to store the Java type of custom configuration implementation. Can be ommited when the default type (<code>ComponentConfiguration</code>) is used by a component.</p>
</li>
<li>
<p><em>`type`</em> (<code>string</code>): The type of the component</p>
</li>
<li>
<p><em>`enabled`</em> (<code>boolean</code>): Allows to disable a configuration withou deleting it.</p>
</li>
<li>
<p><em>`unbound`</em> (<code>boolean</code>): if <code>true</code> this configuration is not bound to any component. This means that the <code>type</code> is wrong or the component of that <code>type</code> is currently not available</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any other field can be used for the actual configuration of the component. Their are no limitations to the kind of the configuration as long as the Component referenced by the <code>type</code> value can understand it.</p>
</div>
</div>
<div class="sect3">
<h4 id="retrieve-client-configuration"><a class="anchor" href="#retrieve-client-configuration"></a><a class="link" href="#retrieve-client-configuration">Retrieve Client Configuration</a></h4>
<div class="paragraph">
<p><em>endpoint</em>: <code>GET client/{client-id}/config</code><br>
<em>response body</em>: the created client configuration <code>{&lt;conf-cat&gt;: [&lt;comp-conf&gt;,&lt;comp-conf&gt;]}</code></p>
</div>
<div class="paragraph">
<p>Retrieve the configuration for the client with the <code>{client-id}</code>. If no configuration is present a <code>404 Not Found</code> is returned</p>
</div>
</div>
<div class="sect3">
<h4 id="client-configuration-validation"><a class="anchor" href="#client-configuration-validation"></a><a class="link" href="#client-configuration-validation">Client Configuration Validation</a></h4>
<div class="paragraph">
<p>Configuration are validated on any update. This validation has several steps that are done for every component configuration:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>it is checked if the Component targeted by the Configuration is active. For this the <code>category</code> and the <code>type</code> field of the configuration are matched against registerd components. If this succeeds <code>unbound</code> is set to <code>false</code>.</p>
</li>
<li>
<p>for all <em>bound</em> configurations the expected configuration class of the component is matched with the <code><em>class</code> value of the configuration. If those do not match the configuration is marked as _illegal</em></p>
</li>
<li>
<p>the configuration is parsed to the component for validation. This validation can fail because of missing or illegal field values.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>During the validation process all validation errors are collected. If one or more are present a <code>422 Unprocessable Entity</code> response is generated. This response include <a href="https://github.com/json-path/JsonPath">JSON Path</a> pointer to missing and illegal fields to allow UI to highlight those issues.</p>
</div>
<div class="paragraph">
<p>The following listing shows an example where an illegal URL was configured as <code>solrEndpoint</code> for the 2nd configuration of the <code>queryBuilder</code> category.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X POST -H &quot;content-type: application/json&quot; &quot;http://localhost:8080/config/client25/config&quot; --data-binary '{
  &quot;queryBuilder&quot;: [
    [..],
    {
      &quot;_class&quot;: &quot;io.redlink.smarti.query.solr.SolrEndpointConfiguration&quot;,
      &quot;name&quot;: &quot;solrsearch&quot;,
      &quot;displayName&quot;: &quot;solrsearch&quot;,
      &quot;type&quot;: &quot;solrsearch&quot;,
      &quot;enabled&quot;: false,
      &quot;unbound&quot;: false,
      &quot;solrEndpoint&quot;: &quot;NOT A REAL URL&quot;,
      ...
    },
    [..]
    ]
}'

&lt; HTTP/1.1 422
&lt; Content-Type: application/json;charset=UTF-8

{
  &quot;data&quot;: {
    &quot;illegal&quot;: {
      &quot;queryBuilder[1].solrEndpoint&quot;: &quot;unknown protocol: dummy&quot;
    }
  },
  &quot;message&quot;: &quot;Unable to process io.redlink.smarti.model.config.Configuration because of 1 illegal [queryBuilder[1].solrEndpoint] and 0 missing fields []&quot;,
  &quot;status&quot;: 422
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="security"><a class="anchor" href="#security"></a><a class="link" href="#security">Security</a></h4>
<div class="sect4">
<h5 id="create-access-token"><a class="anchor" href="#create-access-token"></a><a class="link" href="#create-access-token">Create Access-Token</a></h5>
<div class="paragraph">
<p>Access-Tokens can be used to authenticate to smarti.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ curl -XPOST 'http://localhost:9000/client/&lt;clientId&gt;/token' \
    -H 'Content-Type: application/json' \
    --data-binary '{&quot;label&quot;:&quot;rocket.chat&quot;}'
{
  &quot;id&quot;:&quot;5a02d2539fcc0c7b2bf12e55&quot;,
  &quot;token&quot;:&quot;3fbbc2575a309caaaf1b050c68461a1b5eec9c60/1p7NZ6IA&quot;,
  &quot;label&quot;:&quot;rocket.chat&quot;,
  &quot;created&quot;:1510134355816
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Provide the header <code>X-Auth-Token: 3fbbc2575a309caaaf1b050c68461a1b5eec9c60/1p7NZ6IA</code> with every request for that client.</p>
</div>
</div>
<div class="sect4">
<h5 id="create-user"><a class="anchor" href="#create-user"></a><a class="link" href="#create-user">Create User</a></h5>
<div class="paragraph">
<p>Users are assigned to one or more clients. A user has full access to
functionality of it&#8217;s clients (change modifications, create/delete users and tokens, manage conversations, etc&#8230;&#8203;)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -XPOST 'http://localhost:9000/client/&lt;clientId&gt;/user' \
    -H 'Content-Type: application/json;charset=UTF-8' \
    --data-binary '{&quot;login&quot;:&quot;foo&quot;,&quot;profile&quot;:{&quot;name&quot;:&quot;Foo Bar&quot;,&quot;email&quot;:&quot;foo@example.com&quot;}}'

{
  &quot;login&quot;:&quot;foo&quot;,
  &quot;clients&quot;:[&quot;&lt;clientId&gt;&quot;],
  &quot;profile&quot;: {
    &quot;name&quot;:&quot;Foo Bar&quot;,
    &quot;email&quot;:&quot;foo@example.com&quot;
  }
}
curl -XPUT 'http://localhost:9000/auth/foo/password' \
    -H 'Content-Type: application/json;charset=UTF-8' \
    --data-binary '{&quot;password&quot;:&quot;foo&quot;}'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="query-builder-configurations"><a class="anchor" href="#query-builder-configurations"></a><a class="link" href="#query-builder-configurations">Query Builder Configurations</a></h4>
<div class="paragraph">
<p><code>QueryBulder</code> are one type of components that can be configured
with the client configuration.</p>
</div>
<div class="sect4">
<h5 id="solr-search-query-builder"><a class="anchor" href="#solr-search-query-builder"></a><a class="link" href="#solr-search-query-builder">Solr Search Query Builder</a></h5>
<div class="paragraph">
<p>The Solr Search Query Builder uses the <a href="#_latch_template">LATCH Template</a> to build a Solr Query based on the configured Solr Endpoint Configuration.</p>
</div>
<div class="paragraph">
<p>Solr Endpoint Configurations are Client specific and are set by using the <a href="#_client_configuration_web_service">Client service</a> and or the <a href="#_admin_ui">Admin UI</a>.</p>
</div>
<div class="paragraph">
<p>The following listing shows the JSON if such an configuration</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">_class</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">io.redlink.smarti.query.solr.SolrEndpointConfiguraion</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">displayName</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Solr Search Test</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">solrsearch</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">unbound</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">solrEndpoint</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">http://my.solr.org/test/me</span><span class="delimiter">&quot;</span></span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">search</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">field</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title@de</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">fullText</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">field</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">text@de</span><span class="delimiter">&quot;</span></span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">spatial</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">locationNameField</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">location</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">latLonPointSpatialField</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">rptField</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">bboxField</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">temporal</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">timeRangeField</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">startTimeField</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">endTimeField</span><span class="delimiter">&quot;</span></span>: <span class="value">null</span>
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">related</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">enabled</span><span class="delimiter">&quot;</span></span>: <span class="value">false</span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">fields</span><span class="delimiter">&quot;</span></span>: []
    }
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">defaults</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">rows</span><span class="delimiter">&quot;</span></span>: <span class="integer">8</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">fields</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">*,score</span><span class="delimiter">&quot;</span></span>
  },
  <span class="key"><span class="delimiter">&quot;</span><span class="content">result</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">numOfRows</span><span class="delimiter">&quot;</span></span>: <span class="integer">10</span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">mappings</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">doctype</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">doctype</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">thumb</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">thumb</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">link</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">link</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">date</span><span class="delimiter">&quot;</span></span>,
      <span class="key"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>_class</code>: This property needs to refer the Java implementation of the configuration class. The value MUST BE <code>io.redlink.smarti.query.solr.SolrEndpointConfiguration</code></p>
</li>
<li>
<p><code>name</code> and <code>displayName</code>: Eigher or both of those are required. <code>name</code> must be a slug name (<code>a-z0-9_</code>). If only one of the two is present the other one is set accordingly. The name MUST BE unique within all solr endpoint configurations for a Client.</p>
</li>
<li>
<p><code>type</code>: refers to the Query Builder Component. The value MUST BE <code>solrsearch</code></p>
</li>
<li>
<p><code>enabled</code>: allows to disable a configuration without deleting it</p>
</li>
<li>
<p><code>unbound</code>: set by the server (read-only). If <code>true</code> the Solr Search Query Builder is not available in Smarti</p>
</li>
<li>
<p><code>solrEndpoint</code>: The URL if the Solr Endpoint (the Solr response handler to be used for search requests)</p>
</li>
<li>
<p><code>search</code>: Configuration on how to build Solr Queries based on Information from the LATCH Template</p>
<div class="ulist">
<ul>
<li>
<p><code>title</code>: Configuration for the title search. The value of Tokens with the Roles <strong>A</strong>lphabet or <strong>L</strong>ocation will be used. The title search terms will get an increased boost.</p>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: allows to enable/disable title search.</p>
</li>
<li>
<p><code>field</code>: the title field in the Solr index</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>fullText</code>: full text search. The value of Tokens with the <strong>A</strong>lphabet roles will be used to create search terms</p>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: allows to enable/disable full text search.</p>
</li>
<li>
<p><code>field</code>: the full text search field in the Solr index. If <code>null</code> or empty the default field (or <code>df</code> if present) will be used</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>spatial</code>: <strong>L</strong>ocation role tokens will be used for spatial search terms.</p>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: allows to enable/disable spatial search.</p>
</li>
<li>
<p><code>locationNameField</code>: The values of spatial tokens will be used to search in this field. If <code>null</code> or empty the default field (or <code>df</code> if present) will be used.</p>
</li>
<li>
<p><code>latLonPointSpatialField</code>: Lat/long information of Tokens will be used to create query terms for this field. Spatial Tokens without those information will be ignored.</p>
</li>
<li>
<p><code>rptField</code>: Lat/long information of Tokens will be used to create query terms for this field. Spatial Tokens without those information will be ignored.</p>
</li>
<li>
<p><code>bboxField</code>: Lat/long information of Tokens will be used to create query terms for this field. Spatial Tokens without those information will be ignored.</p>
</li>
</ul>
</div>
</li>
<li>
<p>temporal: Tokens with the role <strong>T</strong>ime will be considered for temporal searches.</p>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: allows to enable/disable temporal search.</p>
</li>
<li>
<p><code>timeRangeField</code>: Supports temporal queries on a Solr field using the <code>DateRangeField</code> field type</p>
</li>
<li>
<p><code>startTimeField</code>: Supports temporal queries on a Solr field using the date field type</p>
</li>
<li>
<p><code>endTimeField</code>: Optional time range support for Solr schemas that use a start/end date field for storing ranges</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>related</code>: Allows to generate Solr MLT queries to suggest similar documents. This will use the content of the Conversation to search for similar content. Typically this should be only enabled if all other options are disabled.</p>
<div class="ulist">
<ul>
<li>
<p><code>enabled</code>: allows to enable/disable Solr MLT queries.</p>
</li>
<li>
<p><code>fields</code>: Array with the fields used for Solr MLT</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>defaults</code>: A map with solr parameters that are sent with every request (examples <code>"fq" : "source:(news archive)"</code> or <code>"df": "text_de"</code>, <code>"fields": "*,score"</code>, <code>"rows": 10</code>, &#8230;&#8203;)</p>
</li>
<li>
<p><code>result</code>: Defines how results are processed</p>
<div class="ulist">
<ul>
<li>
<p><code>numOfRows</code>: defines the nuber of results in the UI</p>
</li>
<li>
<p><code>mappings</code>: Defines how Solr document fields in the results are mapped to fields known by the UI presenting results</p>
<div class="ulist">
<ul>
<li>
<p><code>title</code>: the title as shown in the UI</p>
</li>
<li>
<p><code>description</code>: the description as shown in the UI</p>
</li>
<li>
<p><code>type</code>: the mime-type of the document (e.g. <code>text/html</code>)</p>
</li>
<li>
<p><code>doctype</code>: the type of the document (e.g. "blogpost", "webpage", "document" …)</p>
</li>
<li>
<p><code>thumb</code>: the thumbnail used in the UI</p>
</li>
<li>
<p><code>link</code>: the link to the result</p>
</li>
<li>
<p><code>date</code>: the date for the result (e.g. the modification date)</p>
</li>
<li>
<p><code>source</code>: the source of the result</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The defaults can be set in via <code>application.properties</code>. See <a href="#_query_builder_default_configuration">query builder default configuration</a> for details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="conversation-search-query-builder"><a class="anchor" href="#conversation-search-query-builder"></a><a class="link" href="#conversation-search-query-builder">Conversation Search Query Builder</a></h5>
<div class="paragraph">
<p>A <code>Conversation Search Query Builder</code> offers relevant conversations that took place earlier covering a similar or related
topic.
There are two different approaches how <em>relevant</em> is defined:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Keyword-Based Similarity</em> determines similar conversations based on detected keywords.</p>
</li>
<li>
<p><em>Content-Based Similarity</em> uses <code>more-like-this</code>-similarity on the initial message of other conversations.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following configuration options are available for `Conversation Search Query Builder`s:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  <span class="key"><span class="delimiter">&quot;</span><span class="content">pageSize</span><span class="delimiter">&quot;</span></span>: <span class="integer">3</span>,
  <span class="key"><span class="delimiter">&quot;</span><span class="content">filter</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">support_area</span><span class="delimiter">&quot;</span></span>
  ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pageSize</code>: the default number of related conversations.</p>
</li>
<li>
<p><code>filter</code>: fields from <code>metadata</code> that should be used for filtering (Solr <code>fq</code>-parameter)</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="conversation-admin-web-service"><a class="anchor" href="#conversation-admin-web-service"></a><a class="link" href="#conversation-admin-web-service">Conversation admin web service</a></h3>
<div class="paragraph">
<p>TODO: describe the admin API</p>
</div>
</div>
<div class="sect2">
<h3 id="user-management-web-service"><a class="anchor" href="#user-management-web-service"></a><a class="link" href="#user-management-web-service">User management web service</a></h3>
<div class="paragraph">
<p>TODO: describe the user API</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-troubleshooting-guide"><a class="anchor" href="#smarti-troubleshooting-guide"></a><a class="link" href="#smarti-troubleshooting-guide">Smarti Troubleshooting Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some cases, Smarti will not do what you expect it to do.
Maybe you have encountered an issue that is already known.
If so, this is the place to be for resolving the problem.</p>
</div>
<div class="sect2">
<h3 id="general-advices"><a class="anchor" href="#general-advices"></a><a class="link" href="#general-advices">General advices</a></h3>
<div class="sect3">
<h4 id="system-requirements-2"><a class="anchor" href="#system-requirements-2"></a><a class="link" href="#system-requirements-2">System requirements</a></h4>
<div class="paragraph">
<p>Only if the <a href="#_system_requirements">System Requirements</a> are fulfilled, Smarti will work correctly.
E.g. in case of too little memory the system will behave in an unexpected way.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Ensure the machine running Smarti has at least 4GB of RAM!
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Ensure your JVM has allocated enough memory for heap space by using the <code>-Xmx4g</code> option.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="system-information"><a class="anchor" href="#system-information"></a><a class="link" href="#system-information">System information</a></h4>
<div class="paragraph">
<p>In case of any problems, it is important to know how to analyze your system.
Also if you like to report a bug it is quite necessary for other people, willing to help you, that you provide information about your environment and the setup.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Read section <a href="#_system_maintenance">System maintenance</a> to learn more about:
Logging, Monitoring, System Health, System Info Start/Stop.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Know your system: platform, operating system, runtime environment, software components and release versions.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="external-libraries-not-found-or-not-readable"><a class="anchor" href="#external-libraries-not-found-or-not-readable"></a><a class="link" href="#external-libraries-not-found-or-not-readable">External libraries not found or not readable</a></h3>
<div class="sect3">
<h4 id="exception"><a class="anchor" href="#exception"></a><a class="link" href="#exception">Exception</a></h4>
<div class="paragraph">
<p>If external dependencies of Smarti are not in the class path of the JVM, the system health check:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://${smarti-host}:${smarti-port}/system/health</code></pre>
</div>
</div>
<div class="paragraph">
<p>will return <code>{"status":"DOWN"}</code>. Additional there are some errors logged during server startup in <code>main.log</code> like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>ERROR RequiredProvidersHealthCheck - Missing Processor: 'stanfordNlpProcessor'
ERROR RequiredProvidersHealthCheck - Missing Processor: 'germanTrueCaseExtractor'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="impact"><a class="anchor" href="#impact"></a><a class="link" href="#impact">Impact</a></h4>
<div class="paragraph">
<p>If external libs are not in the class path of a running Smarti instance, the system will boot up anyway.
For example, if the Stanford NLP libs are missing, the text analysis will not work.
In this case Smarti can not analyze conversations correctly and also the suggested messages will not fit.</p>
</div>
</div>
<div class="sect3">
<h4 id="reason"><a class="anchor" href="#reason"></a><a class="link" href="#reason">Reason</a></h4>
<div class="paragraph">
<p>This problem can be caused by</p>
</div>
<div class="ulist">
<ul>
<li>
<p>forgotten to download the jars,</p>
</li>
<li>
<p>downloaded the jars to a wrong location</p>
</li>
<li>
<p>insufficient permissions on the file system</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="solution"><a class="anchor" href="#solution"></a><a class="link" href="#solution">Solution</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Download the external libraries</strong></p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure correct version and make sure they are in the class path.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ${working-dir}/ext
$ wget ${ext-file-name}</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Check the permissions</strong></p>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Ensure that the user running Smarti has sufficient permissions on the file system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo chown -R smarti: /var/lib/smarti/ext
$ sudo chmod a+x /var/lib/smarti /var/lib/smarti/ext /var/log/smarti</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p><strong>Read more about additional components</strong></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Read also section <a href="#_additional_components">Additional components</a>.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="running-smarti-on-a-container"><a class="anchor" href="#running-smarti-on-a-container"></a><a class="link" href="#running-smarti-on-a-container">Running Smarti on a container</a></h3>
<div class="paragraph">
<p>bzip missing</p>
</div>
</div>
<div class="sect2">
<h3 id="not-enough-memory-build_time"><a class="anchor" href="#not-enough-memory-build_time"></a><a class="link" href="#not-enough-memory-build_time">Not enough memory @build_time</a></h3>

</div>
<div class="sect2">
<h3 id="not-enough-memory-run_time"><a class="anchor" href="#not-enough-memory-run_time"></a><a class="link" href="#not-enough-memory-run_time">Not enough memory @run_time</a></h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-developer-guide"><a class="anchor" href="#smarti-developer-guide"></a><a class="link" href="#smarti-developer-guide">Smarti Developer Guide</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">Introduction</a></h3>
<div class="paragraph">
<p><strong>Smarti</strong> is a <a href="https://java.com/">Java</a>-Application based on the <a href="https://spring.io/">Spring Framework</a>.
The application uses <a href="https://www.mongodb.com/">MongoDB</a> as database and <a href="http://lucene.apache.org/solr/">Apache Solr</a> as search engine.
Installation packages are provided for <a href="https://www.debian.org/">Debian</a>- and <a href="https://www.redhat.com/">RedHat</a>-based systems.
Alternatively the application can be started by directly launching the executable jar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar smarti-${smarti-version}-exec.jar</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="build-and-run"><a class="anchor" href="#build-and-run"></a><a class="link" href="#build-and-run">Build and Run</a></h3>
<div class="paragraph">
<p>This section explains how to checkout and build the Smarti application from its sources.
By following these steps you will learn how to build, run and debug Smarti.
Transfer these instructions on your local machine in order to start setting up your Software Development Environment (SDE).</p>
</div>
<div class="paragraph">
<p>In order to build &amp; run Smarti the <a href="#_system_requirements">System requirements</a> have to be fulfilled.
How to achieve that heavily depends on your target environment.
When creating this documentation all commands have been executed and tested with <a href="http://releases.ubuntu.com/16.04/">Ubuntu 16.04. LTS</a> server running on <a href="https://aws.amazon.com/ec2/instance-types/">Amazon EC2 instance</a> (t2.large).
Therefore and to keep it simple we decided to use Debian&#8217;s package manager <code>apt-get</code> for documentation purpose.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have any trouble please have a look at <a href="#_smarti_troubleshooting_guide">Troubleshooting</a>, maybe you&#8217;re not alone.
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<strong>Be careful using <code>copy &amp; paste</code>.</strong><br>
The aim of this manual is to explain and not to provide scripts.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="prepare"><a class="anchor" href="#prepare"></a><a class="link" href="#prepare">Prepare</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install Java</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo apt-get install openjdk-8-jdk</code></pre>
</div>
</div>
</li>
<li>
<p>Install MongoDB (optional)</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo apt-get install mongodb-server</code></pre>
</div>
</div>
</li>
<li>
<p>Install build components</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ sudo apt-get install git maven ruby ruby-sass ruby-compass</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>For other operating systems</strong>
check the installation manuals for the target platform:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git</a> (<code>git</code>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="https://maven.apache.org/install.html">Maven</a> (<code>maven</code>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="https://www.ruby-lang.org/en/documentation/installation">Ruby</a> (<code>ruby</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and on top of ruby use its package manager <code>gem</code> to install <code>sass</code> and <code>compass</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">sudo gem install sass compass</code></pre>
</div>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <a href="http://sass-lang.com/install">Sass</a> (<code>ruby-sass</code>)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="http://compass-style.org/install">Compass</a> (<code>ruby-compass</code>)</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="checkout"><a class="anchor" href="#checkout"></a><a class="link" href="#checkout">Checkout</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a source directory <code>${smarti-source}</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir ${smarti-source}</code></pre>
</div>
</div>
</li>
<li>
<p>Checkout <a href="https://github.com/redlink-gmbh/smarti/tree/develop"><strong>Smarti</strong> source code</a> from <a href="https://github.com/">GitHub</a></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ git clone https://github.com/redlink-gmbh/smarti.git ${smarti-source}</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="build"><a class="anchor" href="#build"></a><a class="link" href="#build">Build</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Change into the source directory</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ cd ${smarti-source}</code></pre>
</div>
</div>
</li>
<li>
<p>Execute maven build</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mvn clean install [ -Pdeb | -Prpm ]</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Installation packages can be built for <a href="https://www.debian.org/">Debian</a>- and <a href="https://www.redhat.com/">RedHat</a>-based systems.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The build artifacts are finally placed in the <code>${smarti-source}/dist/target</code> directory.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="run"><a class="anchor" href="#run"></a><a class="link" href="#run">Run</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a working directory</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mkdir ${smarti-work-dir} &amp;&amp; cd ${smarti-work-dir}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Working directory</strong> - If you launch smarti the first time the <code>application.properties</code> file is created inside the directory where <code>java -jar</code> is executed.
When ever this documentation refers the <code>${smarti-work-dir}</code>, the directory where the <code>application.properties</code> is located, is being meant.
Since Smarti is a Spring boot application you can externalize the configuration as explained in the <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">Spring docs</a>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Copy the executable jar into <code>${smarti-work-dir}</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ mv ${smarti-source}/dist/target/smarti-${smarti-version}-exec.jar .</code></pre>
</div>
</div>
</li>
<li>
<p>Launch smarti</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">$ java -jar smarti-${smarti-version}-exec.jar</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Stanford NLP</strong> - If you want to use Stanford NLP analysis, ensure that the required libraries are included in the class path.
For more information and how to achieve this read section <a href="#_enable_stanford_nlp">Enable Stanford NLP</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>Common challenges</strong> - If this the first time you&#8217;re running <strong>Smarti</strong>, you may have been stepped into a pitfall and it does not work.
We have picked up some common challenges that might be helpful.
See sections <a href="#_smarti_troubleshooting_guide">Troubleshooting</a> in any case of problems.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="debug"><a class="anchor" href="#debug"></a><a class="link" href="#debug">Debug</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Launch smarti in debug mode</p>
<div class="paragraph">
<p>To launch <strong>Smarti</strong> in debug mode create a shell script appending preferred options to the <code>java</code>-command like:</p>
</div>
<div class="listingblock">
<div class="title">start-smarti.sh</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">#!/bin/bash
java -Xmx4g -jar \
    -Xdebug -Xrunjdwp:transport=dt_socket,address=${smarti-debug-port},server=y,suspend=n\
    -Dspring.profiles.active=local\
    application/target/smarti-${smarti-version}-exec.jar\
    --solrlib.home=${solr-home}</code></pre>
</div>
</div>
</li>
<li>
<p>Configure your IDE</p>
<div class="paragraph">
<p>Create a debug configuration for the <code>Remote Java Application</code> and set the specified <code>${smarti-debug-port}</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/debug-configuration.png" alt="debug configuration">
</div>
</div>
</li>
</ol>
</div>
<hr>
</div>
<div class="sect3">
<h4 id="release"><a class="anchor" href="#release"></a><a class="link" href="#release">Release</a></h4>
<div class="paragraph">
<p>For a release, a release branch (based on develop) is created which represents the release candidate.
If the candidate fulfills the requirements, the issues of the release are documented in the changelogs.
Then the version number is set to the release number, the branch is merged into master and the master is tagged with the release number.
Additionally, the version number of the develop branch is set to the new snapshot version.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Now you are ready to start developing the next amazing feature for <strong>Smarti</strong>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Read <a href="#_additional_components">Additional Components</a> section.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="smarti-contribution-guide"><a class="anchor" href="#smarti-contribution-guide"></a><a class="link" href="#smarti-contribution-guide">Smarti Contribution Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Smarti is an Open Source project so everyone is encouraged to improve it. Don&#8217;t hesitate to report bugs, provide fixes or
share new ideas with us. We have various ways for contribution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>use the issue tracker - report bugs, suggest features or give hints how we can improve the documentation.</p>
</li>
<li>
<p>discuss issues with the community - two brains are better than one.</p>
</li>
<li>
<p>write code - no patch is too small. So even fixing typos helps to improve Smarti.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a-href-faq-html-faqs-a"><a class="anchor" href="#a-href-faq-html-faqs-a"></a><a class="link" href="#a-href-faq-html-faqs-a"><a href="faq.html">FAQs</a></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="faq.html">FAQs</a> are addressing common concerns, questions or objections that might come up to your mind, when get into touch with Smarti development.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="a-href-changelog-html-changelog-a"><a class="anchor" href="#a-href-changelog-html-changelog-a"></a><a class="link" href="#a-href-changelog-html-changelog-a"><a href="changelog.html">Changelog</a></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <a href="changelog.html">Changelog</a> provides a complete list of changes in older releases.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="license"><a class="anchor" href="#license"></a><a class="link" href="#license">License</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Free use of this software is granted under the terms of the Apache License Version 2.0.
See the <a href="https://raw.githubusercontent.com/redlink-gmbh/smarti/master/LICENSE.txt">License</a> for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authors"><a class="anchor" href="#authors"></a><a class="link" href="#authors">Authors</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Smarti is lead by <a href="http://redlink.co">Redlink</a> and <a href="http://assistify.de">Assistify</a> and was initiated in 2017.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version v0.8.1<br>
Last updated 2019-07-05 10:01:14 UTC
</div>
</div>
</body>
</html>